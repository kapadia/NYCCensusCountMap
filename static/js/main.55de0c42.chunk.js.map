{"version":3,"sources":["components/RangeLegend.js","components/CategoryLegend.js","components/BoundarySelector.js","components/FacilitiesSelector.js","components/HelpTab.js","components/InfoTab.js","components/Legend.js","colors.js","components/PieCard.js","components/FactCard.js","components/AssetCategoryCard.js","components/DetailsSelector.js","hooks/useFacilities.js","components/Details.js","hooks/useGeoJSONLayer.js","Layers.js","hooks/useFacilitiesLayer.js","pages/MainPage.js","hooks/useMap.js","hooks/useBoundaryLayers.js","App.js","serviceWorker.js","index.js"],"names":["RangeLegend","name","min","max","colStart","colEnd","gradient","console","log","className","style","background","CategoryLegend","categories","map","category","key","backgroundColor","color","BoundarySelector","boundaries","selectedBoundary","onSelect","options","Object","entries","value","label","datasetName","onChange","a","placeholder","FacilitiesSection","title","selected","useState","expanded","setExpanded","selectedInThisCategory","filter","o","includes","allSelected","length","onClick","icon","faAngleDown","faAngleRight","type","checked","e","selectAll","target","option","FacilitiesSelector","onSelected","section","HelpTab","href","herf","listStyleType","classNmae","Legend","onSelectBoundary","onSelectMetric","showFacilities","onShowFacilitiesChange","metric","selectedFacilityTypes","onSelectFacilityType","showENRFU","onToggleENRFU","shareURL","tab","setTab","faLayerGroup","faInfoCircle","faQuestionCircle","text","window","location","colors","reverse","renderCustomizedLabel","cx","cy","midAngle","innerRadius","outerRadius","percent","radius","index","x","Math","cos","RADIAN","y","sin","fill","textAnchor","dominantBaseline","toFixed","PI","PieCard","data","colData","d","i","width","height","labelLine","isAnimationActive","entry","FactCard","facts","fact","toLocaleString","AssetCategoryCard","assets","ceil","src","process","asset","address","boro","city","zipcode","join","DetailsSelector","isSelected","useFacilities","facilities","setFacilities","useEffect","fetch","then","json","Details","feature","layer","onSelectFacility","tract","facilityTypes","showBoundaryData","setShowBoundaryData","selectedDetails","setSelectedDetails","id","types","layerIDs","cd","tracts","cc","sd","nta","police_precincts","congress_districts","senate_districts","NOCCs","useMemo","features","facility","properties","asset_type","f","useFilteredFacilities","geoid","GEOID","featureName","nat","displayFeature","downloadAssets","useCallback","csv","blob","Blob","boundaryType","boundaryId","saveAs","Fragment","floor","total_population","htc_pop","MRR2010","strategy_code","contactStrategy","faDownload","detail","race_white","race_total","race_black","race_asian","race_hispanic","race_other","makeDemographicData","foreign_born_native","foreign_born_foreign","makeForeignData","age_less_5","age_6_15","age_16_64","age_64_over","makeAgeData","norm","english_english","english_asian","english_spanish","english_european","english_other","makeEnglishData","bilingual","english_total_households","internet_no_access","internet_subscription","internet_no_subscription","makeInternetData","own_vs_rent_rent","own_vs_rent_owner","makeRenting","useGeoJSONLayer","url","paintFill","paintLine","sourceLayer","selection","visible","fillLayer","useRef","lineLayer","source","source_name","oldSelectionID","metricChangeTimeout","visibilityChangeTimeout","current","on","addSource","addLayer","paint","layout","visibility","setFeatureState","setVisibility","loaded","setLayoutProperty","clearTimeout","setTimeout","setPaint","setPaintProperty","fillStyles","strategy","blackPop","asianPop","latinxPop","whitePop","otherPop","noInternetPC","englishProficency","under5","returnCount","HTCLayer","EarlyNRFU","BoundaryLayers","polygons","labels","nameCol","nameAlt","useFacilitiesLayer","selectedTypes","reduce","set","add","Set","Promise","all","img","resolve","reject","loadImage","error","res","addImage","loadAllImages","forEach","MainPage","mapDiv","setSelectedBoundary","selectedTract","setSelectedTract","selectedFeature","setSelectedFeature","setHardToCountStats","setShowFacilities","setSelectedFacilityTypes","setMetric","setShowNRFU","ReactGA","initialize","pageview","pathname","search","Papa","parse","download","header","complete","results","mapDivRef","lnglat","zoom","mapboxgl","accessToken","Map","container","center","addControl","MapboxGeocoder","ScaleControl","NavigationControl","zoomToBounds","bounds","fitBounds","useMap","params","queryString","nrfu","boundaryID","zoomToFeature","isStyleLoaded","getLayer","querySourceFeatures","sf","find","turf","units","searchBox","Layers","boundaryLayers","selectedLayer","selectedVar","onSelectLayer","selectedGeomID","layers","setLayers","boundaryLayerChangeTimeout","layerList","sourceName","layerDeets","sourceLabels","labelLayer","updateVisibility","useBoundaryLayers","boundary","origin","ref","newList","t","App","basename","path","component","Boolean","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.55de0c42.chunk.js","sourcesContent":["import React from 'react';\n\nexport default function RangeLegend({name, min, max, colStart, colEnd}) {\n  const gradient = `linear-gradient(90deg, ${colStart} 0%, ${colEnd} 100%)`;\n\n  console.log('gradient is ', gradient);\n  return (\n    <div className=\"range-legend\">\n      <div\n        className=\"range-legend-bar\"\n        style={{\n          background: gradient,\n        }}\n      />\n      <div className=\"range-legend-labels\">\n        <p>{min}</p> <p>{max}</p>\n      </div>\n    </div>\n  );\n}\n","import React from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faCircle } from \"@fortawesome/free-solid-svg-icons\";\n\nexport default function CategoryLegend({ categories }) {\n    return (\n        <section className=\"category-layer\">\n            <ul>\n                {categories.map(category => (\n                    <li key={category.name} className=\"category-entry\">\n                        <div\n                            className=\"category-marker\"\n                            style={{ backgroundColor: category.color }}\n                        />\n                        {category.name}\n                    </li>\n                ))}\n            </ul>\n        </section>\n    );\n}\n","import React from 'react';\nimport Dropdown from 'react-dropdown';\nimport 'react-dropdown/style.css';\n\nexport default function BoundarySelector({\n  boundaries,\n  selectedBoundary,\n  onSelect,\n}) {\n  const options = Object.entries(boundaries).map(([id, layer]) => ({\n    value: id,\n    label: layer.datasetName,\n  }));\n  return (\n    <section className=\"boundary-selector\">\n      <h3>Boundaries</h3>\n\n      {boundaries && (\n        <Dropdown\n          options={[{value: 'tracts', label: 'Census Tracts'}, ...options]}\n          onChange={a => onSelect(a.value)}\n          value={selectedBoundary}\n          placeholder=\"Select a boundary\"\n        />\n      )}\n    </section>\n  );\n}\n","import React, { useState } from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faAngleRight, faAngleDown } from \"@fortawesome/free-solid-svg-icons\";\n\nfunction FacilitiesSection({ title, options, selected, onSelect }) {\n    const [expanded, setExpanded] = useState(false);\n    const selectedInThisCategory = options.filter(o => selected.includes(o));\n    const allSelected = selectedInThisCategory.length === options.length;\n\n    const onSelectAll = selectAll => {\n        if (selectAll) {\n            onSelect(options.filter(o => !selected.includes(o)));\n        } else {\n            onSelect(options.filter(o => selected.includes(o)));\n        }\n    };\n    return (\n        <section>\n            <div className=\"facilities-section-header\">\n                <FontAwesomeIcon\n                    onClick={() => setExpanded(!expanded)}\n                    icon={expanded ? faAngleDown : faAngleRight}\n                />{\" \"}\n                <input\n                    type=\"checkbox\"\n                    checked={allSelected}\n                    onChange={e => onSelectAll(e.target.checked)}\n                />\n                <h4 onClick={() => setExpanded(!expanded)}>\n                    {title} ({selectedInThisCategory.length}/{options.length})\n                </h4>\n            </div>\n            {expanded && (\n                <ul>\n                    {options.map(option => (\n                        <li key={option} className=\"facilities-option\">\n                            <input\n                                type=\"checkbox\"\n                                checked={selected.includes(option)}\n                                onChange={() => onSelect([option])}\n                            />\n                            {option}\n                        </li>\n                    ))}\n                </ul>\n            )}\n        </section>\n    );\n}\n\nexport default function FacilitiesSelector({ selected, onSelected }) {\n    const sections = [\n        {\n            title: \"Educational Assets\",\n            options: [\n                \"Head Start and Early Head Start\",\n                \"Universal Pre-K\",\n                \"K-12 (NYC Public Schools)\",\n                \"Community Schools\",\n                \"Public Libraries\"\n            ]\n        },\n\n        {\n            title: \"Services and Programs\",\n            options: [\n                \"Shelters\",\n                \"Food Kitchens and Pantries\",\n                \"Senior Centers\",\n                \"Mental Health Services\",\n                \"Hospitals and Rehab Centers\",\n                \"LGBTQ Centers and Services\",\n                \"NYCHA Developments\"\n            ]\n        },\n\n        {\n            title: \"Neighborhood Institutions\",\n            options: [\n                \"Community-Based Organizations\",\n                \"Faith-Based Organizations\",\n                \"Community Centers and YMCA's\"\n            ]\n        }\n    ];\n    const [expanded, setExpanded] = useState({\n        \"Education Assets\": false\n    });\n    return (\n        <div className=\"facilities-selector\">\n            <h3>Community Assets</h3>\n            {sections.map(section => (\n                <FacilitiesSection\n                    key={section.title}\n                    title={section.title}\n                    options={section.options}\n                    selected={selected}\n                    onSelect={option => onSelected(option)}\n                />\n            ))}\n        </div>\n    );\n}\n","import React from \"react\";\n\nexport default function HelpTab() {\n    return (\n        <div className=\"help-tab\">\n            <section>\n                <h3>About</h3>\n\n                <p>\n                    This interactive map was created by{\" \"}\n                    <a href=\"https://hesterstreet.org/\" target=\"_blank\">\n                        Hester Street\n                    </a>{\" \"}\n                    in partnership with{\" \"}\n                    <a herf=\"http://stuartlynn.me/\">Stuart Lynn</a>. Hester\n                    Street is an urban planning, design and development\n                    nonprofit that works to ensure neighborhoods are shaped by\n                    the people who live in them.\n                </p>\n                <p>\n                    This work was made possible with the support of the NYC\n                    Census 2020 and CUNY Complete Count Fund.\n                </p>\n                <p>\n                    If you have additional assets, services or neighborhood\n                    institutions to contribute to the map, please email{\" \"}\n                    <a href=\"mailto:devin@hesterstreet.org\">\n                        devin@hesterstreet.org\n                    </a>{\" \"}\n                    with the subject line \"New interactive map assets\". Be sure\n                    to include the following information for each asset\n                </p>\n                <ul style={{ listStyleType: \"circle\" }}>\n                    <li>Name </li>\n                    <li>Address</li>\n                    <li>Layer it should be added to</li>\n                </ul>\n            </section>\n        </div>\n    );\n}\n","import React from \"react\";\n\nexport default function HelpTab() {\n    return (\n        <div className=\"help-tab\">\n            <section>\n                <h3>Info</h3>\n                <h3>Context Layers</h3>\n                <p>\n                    The base context layers for the map are supplied by\n                    OpenStreetMap>\n                </p>\n            </section>\n            <section>\n                <h3>Asset Layers</h3>\n                <h4>Educational Assets </h4>\n\n                <p>\n                    These layers identify the location of educational\n                    facilities. Children are a historically undercounted\n                    community; it will be important to reach parents at Head\n                    Start, Early Head Start, Universal Pre-K, K-12 (NYC Public\n                    Schools), and Community Schools. Other assets include public\n                    libraries, which can be hubs for engaging the wider\n                    community. These layers do not include a comprehensive list\n                    of charter, parochial, or private schools.\n                </p>\n                <p className=\"source\">\n                    Sources:{\" \"}\n                    <a\n                        target=\"_blank\"\n                        href=\"https://data.cityofnewyork.us/City-Government/Facilities-Database-Shapefile/2fpa-bnsx\"\n                    >\n                        Department of City Planning. (2019). City Planning\n                        Facilities Database.\n                    </a>\n                </p>\n\n                <h4>Services and Programs</h4>\n\n                <p>\n                    These layers identify various locations where New Yorkers\n                    access services, assistance or programs. The assets in this\n                    list can help you engage a range of historically\n                    undercounted communities, like low-income individuals,\n                    people experiencing homelessness, people that live with\n                    mental or physical disabilities, people who do not live in\n                    traditional housing and LGBTQ individuals. These layers do\n                    not include all services and programs serving these\n                    populations. If we are missing any important services in\n                    your community, please let us know by emailing{\" \"}\n                    <a target=\"_blank\" href=\"mainto:devin@hesterstreet.org\">\n                        devin@hesterstreet.org\n                    </a>\n                </p>\n                <p className=\"sources\">\n                    Sources:{\" \"}\n                    <a\n                        target=\"_blank\"\n                        href=\"https://data.cityofnewyork.us/City-Government/Facilities-Database-Shapefile/2fpa-bnsx\"\n                    >\n                        Department of City Planning. (2019). City Planning\n                        Facilities Database\n                    </a>\n                    .\n                    <a\n                        target=\"_blank\"\n                        href=\"https://gaycenter.org/recovery-health/health/lgbthealth-network/#networkmembers\"\n                    >\n                        The Lesbian, Gay, Bisexual and Transgender Community\n                        Center. (2019). LGBTQ Health and Human Services Network\n                        Members.\n                    </a>\n                    <a\n                        target=\"_blank\"\n                        href=\"https://nycopendata.socrata.com/Health/Mental-Health-Service-Finder-Data/8nqg-ia7v\n\"\n                    >\n                        Office of the Mayor. (2018). NYC Mental Health Service\n                        Finder Data.\n                    </a>\n                </p>\n\n                <h4>Neighborhood Institutions</h4>\n                <p>\n                    These layers identify institutions where residents gather,\n                    like faith-based organizations, community centers and\n                    community-based organizations. These neighborhood\n                    institutions can become your partners for Census efforts.\n                    These layers do not include a comprehensive list of all\n                    institutions serving your neighborhood populations. If we\n                    are missing any important institutions in your community,\n                    please let us know by emailing devin@hesterstreet.org\n                </p>\n\n                <p>\n                    Sources:{\" \"}\n                    <a\n                        target=\"_blank\"\n                        href=\"https://data.cityofnewyork.us/City-Government/Facilities-Database-Shapefile/2fpa-bnsx\"\n                    >\n                        Department of City Planning. (2019). City Planning\n                        Facilities Database.{\" \"}\n                    </a>\n                    United Way of New York City, New York Immigration Coalition,\n                    and Hester Street Partner databases in NYC.\n                </p>\n            </section>\n            <section>\n                <h3>Census 2020 Info Layers</h3>\n\n                <h4>Mail Contact Strategy</h4>\n\n                <p>\n                    This dataset shows how US Census Bureau’s plan to contact\n                    each household in the United States. Understanding your\n                    target areas Mail Contact Strategy will help you spread the\n                    word to your community about how they can self-respond to\n                    the Census. In the case of New York City, the forms of\n                    contact include four methods divided into two categories:\n                    Internet First and Internet Choice.\n                </p>\n\n                <p>\n                    Internet First (marked as purple on the map) are areas that\n                    are more likely to respond first online. These households\n                    will receive an invitation to complete the census online.\n                    Areas marked in dark purple will be sent an invitation in\n                    English, while areas marked in light purple will be sent an\n                    invitation in both English and Spanish.\n                </p>\n\n                <p>\n                    Internet Choice (marked as green on the map) are areas that\n                    are less likely to respond online. These households will\n                    receive a paper questionnaire, along with an invitation to\n                    complete the census online or by phone. Areas marked in dark\n                    green will be sent an invitation in English, while areas\n                    marked in light green will be sent an invitation in both\n                    English and Spanish.\n                </p>\n                <p className=\"sources\">\n                    Source: NYC Census 2020 Early NRFU Early NRFU stands for\n                    “Early Non-Response Follow Up”. Non-Response Follow Up is a\n                    contact method the Census Bureau uses to collect information\n                    for those households who have not self-responded to the\n                    Census. During the NRFU period, Census enumerators will\n                    visit households and administer the questionnaire. “Early\n                    NRFU” areas will receive enumerators on April 9th, so the\n                    Census can capture college and university students who live\n                    in off-campus housing before the end of the spring semester\n                    when they may leave for another residence. Source: NYC\n                    Census 2020 2010 Mail Return Rate The 2010 Mail return rate\n                    is the percentage of households who self-responded to the\n                    Census in 2010. Self-response is the more accurate way for\n                    every New Yorker to be counted, so the return rate allows us\n                    to identify areas that have been undercounted in the past\n                    and are at risk of being undercounted again during the 2020\n                    Census. We call this areas “historically undercounted\n                    communities” or “Hard-to-Count areas”. The NYC Census 2020\n                    Team plans to push the City’s Self-Response rate from 62% to\n                    the national average of 76% or higher. Source:U.S. Census\n                    Bureau. (2012). 2012 Planning Database.\n                </p>\n            </section>\n            <section>\n                <h3>Boundary Layers</h3>\n\n                <p>\n                    New York City has many geographic boundaries; all used by\n                    different groups for different purposes. Depending on your\n                    needs, using a specific boundary can help you better\n                    understand your target population.\n                </p>\n                <p>\n                    We want to note that the “NOCC Neighborhoods” boundary\n                    slightly differs from actual boundaries for the\n                    neighborhoods of NYC. This layer specifically pertains to\n                    NOCC leaders for the NYC Census effort and their defined\n                    neighborhood boundaries.\n                </p>\n                <p className=\"sources\">\n                    Sources: NYC Census 2020 NYC Open Data 2018 US Census Bureau\n                    2018\n                </p>\n            </section>\n            <section>\n                <h3>Demographic Layers</h3>\n                <p>\n                    We included data on the demographics of individuals who are\n                    considered undercounted populations. These layers can help\n                    you better hone in on your target populations. For example,\n                    comparing race to internet access can show where areas of\n                    NYC have no internet in relation to which racial group lies\n                    primarily in those areas).\n                </p>\n\n                <p>\n                    For Internet Access: Limited Internet refers to those with\n                    cellular data plans and Internet access without a\n                    subscription. Internet subscription includes any kind of\n                    broadband access, fiber optic, DSL and/or satellite\n                    subscriptions. Internet Access is an extremely important\n                    dataset because the US Census Bureau is not mailing\n                    questionnaires to 80% of national households, and will be\n                    requesting households to fill out the Census online or over\n                    the phone. You can view where certain areas will and will\n                    not receive paper questionnaires by turning on the Mail\n                    Contact Strategies layers under Important Layers.\n                </p>\n                <p classNmae=\"sources\">\n                    Source: US Census Bureau, American Community Survey 5-Year\n                    Data 2018\n                </p>\n            </section>\n        </div>\n    );\n}\n","import React, { useState } from \"react\";\nimport ContactTypeLegend from \"./ContactTypeLegend\";\nimport RangeLegend from \"./RangeLegend\";\nimport CategoryLegend from \"./CategoryLegend\";\nimport BoundarySelector from \"./BoundarySelector\";\nimport FacilitiesSelector from \"./FacilitiesSelector\";\nimport HelpTab from \"./HelpTab\";\nimport InfoTab from \"./InfoTab\";\nimport { CopyToClipboard } from \"react-copy-to-clipboard\";\n\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport {\n    faInfoCircle,\n    faLayerGroup,\n    faQuestionCircle,\n    faList\n} from \"@fortawesome/free-solid-svg-icons\";\n\nimport Dropdown from \"react-dropdown\";\nimport \"react-dropdown/style.css\";\n\nexport default function Legend({\n    selectedBoundary,\n    boundaries,\n    onSelectBoundary,\n    showFacilities,\n    onShowFacilitiesChange,\n    onSelectMetric,\n    metric,\n    selectedFacilityTypes,\n    onSelectFacilityType,\n    showENRFU,\n    onToggleENRFU,\n    shareURL\n}) {\n    const [tab, setTab] = useState(\"layers\");\n    console.log(\"ENRFU \", showENRFU);\n    return (\n        <div className=\"Legend overlay\">\n            <div className=\"tabs\">\n                <div\n                    className={tab === \"layers\" ? \"selected\" : \"\"}\n                    onClick={() => setTab(\"layers\")}\n                >\n                    <FontAwesomeIcon icon={faLayerGroup} />\n                </div>\n                <div\n                    className={tab === \"info\" ? \"selected\" : \"\"}\n                    onClick={() => setTab(\"info\")}\n                >\n                    <FontAwesomeIcon icon={faInfoCircle} />\n                </div>\n                <div\n                    className={tab === \"questions\" ? \"selected\" : \"\"}\n                    onClick={() => setTab(\"questions\")}\n                >\n                    <FontAwesomeIcon icon={faQuestionCircle} />\n                </div>\n            </div>\n            <div className=\"content\">\n                {tab === \"layers\" && (\n                    <section className=\"thematic-layer\">\n                        <h3>Neighborhood Information</h3>\n                        <Dropdown\n                            options={[\n                                {\n                                    value: \"strategy\",\n                                    label: \"2020 Census Mail Contact Stategies\"\n                                },\n                                {\n                                    value: \"returnCount\",\n                                    label: \"Hard to Count Populations(2010)\"\n                                },\n                                {\n                                    value: \"blackPop\",\n                                    label: \"Black Population (%)\"\n                                },\n                                {\n                                    value: \"latinxPop\",\n                                    label: \"Latinx Population (%)\"\n                                },\n                                {\n                                    value: \"asianPop\",\n                                    label: \"Asian Population (%)\"\n                                },\n                                {\n                                    value: \"whitePop\",\n                                    label: \"White Population (%)\"\n                                },\n                                {\n                                    value: \"otherPop\",\n                                    label: \"Other Population (%)\"\n                                },\n                                {\n                                    value: \"noInternetPC\",\n                                    label:\n                                        \"Population with No Internet Access (%)\"\n                                },\n                                {\n                                    value: \"englishProficency\",\n                                    label: \"Limited English Proficiency (%)\"\n                                },\n                                {\n                                    value: \"under5\",\n                                    label: \"Population Under 5 Years Old (%)\"\n                                }\n                            ]}\n                            onChange={a => onSelectMetric(a.value)}\n                            value={metric}\n                            placeholder=\"Select a metric\"\n                        />\n                        {metric === \"strategy\" && (\n                            <CategoryLegend\n                                categories={[\n                                    {\n                                        color: \"#C2A5CF\",\n                                        name: \"Internet First, English\"\n                                    },\n                                    {\n                                        color: \"#9970AB\",\n                                        name: \"Internet First, Bilingual\"\n                                    },\n                                    {\n                                        color: \"#A6DBA0\",\n                                        name: \"Internet Choice, English\"\n                                    },\n                                    {\n                                        color: \"#5AAE61\",\n                                        name: \"Internet Choice, Bilingual\"\n                                    }\n                                ]}\n                            />\n                        )}\n                        {metric === \"returnCount\" && (\n                            <CategoryLegend\n                                categories={[\n                                    { color: \"#b95356\", name: \"0 - 60%\" },\n                                    { color: \"#ee5658\", name: \"60 - 65%\" },\n                                    { color: \"#ecbaa8\", name: \"65 - 70%\" },\n                                    { color: \"#f9bd53\", name: \"70 - 73%\" },\n                                    {\n                                        color: \"rgba(0,0,0,0)\",\n                                        name: \"Not hard to count\"\n                                    }\n                                ]}\n                            />\n                        )}\n                        {metric === \"asianPop\" && (\n                            <RangeLegend\n                                name={\"Asian Population (%)\"}\n                                min={\"0%\"}\n                                max={\"100%\"}\n                                colStart={\"#FFFFFF\"}\n                                colEnd={\"#8f1158\"}\n                            />\n                        )}\n                        {metric === \"blackPop\" && (\n                            <RangeLegend\n                                name={\"Black Population (%)\"}\n                                min={\"0%\"}\n                                max={\"100%\"}\n                                colStart={\"#FFFFFF\"}\n                                colEnd={\"#b93f22\"}\n                            />\n                        )}\n                        {metric === \"latinxPop\" && (\n                            <RangeLegend\n                                name={\"Latinx Population (%)\"}\n                                min={\"0%\"}\n                                max={\"100%\"}\n                                colStart={\"#FFFFFF\"}\n                                colEnd={\"#cf0621\"}\n                            />\n                        )}\n                        {metric === \"whitePop\" && (\n                            <RangeLegend\n                                name={\"White Population (%)\"}\n                                min={\"0%\"}\n                                max={\"100%\"}\n                                colStart={\"#FFFFFF\"}\n                                colEnd={\"#faaf12\"}\n                            />\n                        )}\n                        {metric === \"otherPop\" && (\n                            <RangeLegend\n                                name={\"Other Population (%)\"}\n                                min={\"0%\"}\n                                max={\"100%\"}\n                                colStart={\"#FFFFFF\"}\n                                colEnd={\"#000000\"}\n                            />\n                        )}\n                        {metric === \"noInternetPC\" && (\n                            <RangeLegend\n                                name={\"% No Internet\"}\n                                min={\"0%\"}\n                                max={\"100%\"}\n                                colStart={\"#FFFFFF\"}\n                                colEnd={\"#faaf12\"}\n                            />\n                        )}\n                        {metric === \"englishProficency\" && (\n                            <RangeLegend\n                                name={\"% Proficent in English\"}\n                                min={\"0%\"}\n                                max={\"100%\"}\n                                colStart={\"#FFFFFF\"}\n                                colEnd={\"#faaf12\"}\n                            />\n                        )}\n                        {metric === \"under5\" && (\n                            <RangeLegend\n                                name={\"% under 5 years old\"}\n                                min={\"0%\"}\n                                max={\"10%\"}\n                                colStart={\"#FFFFFF\"}\n                                colEnd={\"#faaf12\"}\n                            />\n                        )}\n                        <BoundarySelector\n                            selectedBoundary={selectedBoundary}\n                            onSelect={onSelectBoundary}\n                            boundaries={boundaries}\n                        />\n                        <FacilitiesSelector\n                            selected={selectedFacilityTypes}\n                            onSelected={onSelectFacilityType}\n                        />\n                        <div className=\"NRFU\">\n                            <h3>Early NRFU Locations</h3>\n                            <div className=\"nrfu-selector\">\n                                <div\n                                    className=\"category-marker\"\n                                    style={{ backgroundColor: \"blue\" }}\n                                />\n                                <input\n                                    type=\"checkbox\"\n                                    checked={showENRFU}\n                                    onChange={() => {\n                                        onToggleENRFU(!showENRFU);\n                                    }}\n                                />\n                                <p>Show NRFU Locations</p>\n                            </div>\n                        </div>\n                        <div className=\"share\">\n                            <h3>Share</h3>\n                            <div className=\"share-buttons\">\n                                <CopyToClipboard text={window.location}>\n                                    <button className=\"share-button\">\n                                        Copy Link\n                                    </button>\n                                </CopyToClipboard>\n\n                                <CopyToClipboard text={shareURL}>\n                                    <button className=\"share-button\">\n                                        Copy Link to this view\n                                    </button>\n                                </CopyToClipboard>\n                            </div>\n                        </div>\n                    </section>\n                )}\n\n                {tab === \"info\" && <InfoTab />}\n                {tab === \"questions\" && <HelpTab />}\n            </div>\n        </div>\n    );\n}\n","export const colors = [\n  '#000000',\n  '#cf0621',\n  '#8f1158',\n  '#b93f22',\n  '#faaf12',\n].reverse();\n","import React from \"react\";\nimport { colors } from \"../colors\";\nimport { PieChart, Pie, Sector, Cell } from \"recharts\";\n\nconst renderCustomizedLabel = ({\n    cx,\n    cy,\n    midAngle,\n    innerRadius,\n    outerRadius,\n    percent,\n    index\n}) => {\n    const radius = innerRadius + (outerRadius - innerRadius) * 0.5;\n    const x = cx + radius * Math.cos(-midAngle * RADIAN);\n    const y = cy + radius * Math.sin(-midAngle * RADIAN);\n    if (percent < 4 / 100) {\n        return \"\";\n    }\n    return (\n        <text\n            x={x}\n            y={y}\n            fill=\"white\"\n            textAnchor={x > cx ? \"start\" : \"end\"}\n            dominantBaseline=\"central\"\n        >\n            {`${(percent * 100).toFixed(0)}%`}\n        </text>\n    );\n};\n\nconst RADIAN = Math.PI / 180;\nexport default function PieCard({ data, title }) {\n    const colData = data.map((d, i) => ({ ...d, color: colors[i % 5] }));\n    const width = 110;\n    const height = 110;\n    const buffer = 5;\n    return (\n        <div className=\"pie-card\">\n            <h2>{title}</h2>\n            <div className=\"pie-card-content\">\n                <PieChart\n                    width={width + buffer}\n                    height={height + buffer}\n                    data={colData}\n                >\n                    <Pie\n                        data={colData}\n                        cx={width / 2}\n                        cy={height / 2}\n                        labelLine={false}\n                        label={renderCustomizedLabel}\n                        outerRadius={width / 2}\n                        isAnimationActive={false}\n                        fill=\"#8884d8\"\n                    >\n                        {colData.map((entry, index) => (\n                            <Cell fill={entry.color} />\n                        ))}\n                    </Pie>\n                </PieChart>\n                <ul className=\"labels\">\n                    {colData.map((entry, index) => (\n                        <li className=\"label\">\n                            <span\n                                className=\"bar\"\n                                style={{ backgroundColor: colors[index] }}\n                            />\n                            <span className=\"label-text\">{entry.name}</span>\n                        </li>\n                    ))}\n                </ul>\n            </div>\n        </div>\n    );\n}\n","import React from \"react\";\n\nexport default function FactCard({ title, facts }) {\n    return (\n        <div className=\"fact\">\n            {facts.map(fact => (\n                <p className=\"fact-name\">\n                    <span className=\"fact-value\">\n                        {fact.value.toLocaleString()}\n                    </span>{\" \"}\n                    <span className=\"fact-text\">{fact.name}</span>\n                </p>\n            ))}\n        </div>\n    );\n}\n","import React from \"react\";\n\nexport default function AssetCategoryCard({ assets, title }) {\n    const icons = {\n        \"Hospitals and Rehab Centers\": \"Dot_Hospitals.png\",\n        \"Faith-Based Organizations\": \"Dot_FBO.png\",\n        \"City Wide Community Schools\": \"Dot_CommunitySchools.png\",\n        \"LGBTQ Centers and Services\": \"Dot_LGBTQ.png\",\n        \"Food Kitchens and Pantries\": \"Dot_FoodKitchens.png\",\n        \"Senior Centers\": \"Dot_SeniorCenters.png\",\n        \"Universal Pre-K\": \"Dot_UniPreK.png\",\n        \"K-12 (NYC Public Schools)\": \"Dot_K12.png\",\n        \"Community Schools\": \"Dot_CommunityCenters.png\",\n        \"Mental Health Services\": \"Dot_MentalHealth.png\",\n        \"Community-Based Organizations\": \"Dot_CBO.png\",\n        \"Public Libraries\": \"Dot_Libraries.png\",\n        \"Head Start and Early Head Start\": \"Dot_HeadStart.png\"\n    };\n\n    const width = Math.max(300, 300 * Math.ceil(assets.length / 3));\n    return (\n        <div className=\"asset-card\" style={{ width: width + \"px\" }}>\n            <h2>\n                <img src={`${process.env.PUBLIC_URL}/imgs/${icons[title]}`} />\n                {title}\n            </h2>\n            <ul style={{ width: width + \"px\" }}>\n                {assets.length == 0 && (\n                    <li key={`${title}-empty `}>\n                        <h3>None identified</h3>\n                    </li>\n                )}\n                {assets.map(asset => (\n                    <li key={asset.name} className=\"asset\">\n                        <h3>{asset.name}</h3>\n                        <p>\n                            {[\n                                asset.address,\n                                asset.boro,\n                                asset.city,\n                                asset.zipcode\n                            ].join(\",\")}\n                        </p>\n                    </li>\n                ))}\n            </ul>\n        </div>\n    );\n}\n","import React from 'react';\n\nexport default function DetailsSelector({selected, onSelect}) {\n  const isSelected = name => (name === selected ? 'selected' : '');\n  return (\n    <div className=\"details-selector\">\n      <ul>\n        <li\n          onClick={() => onSelect('demographics')}\n          className={isSelected('demographics')}>\n          Demographics\n        </li>\n        <li\n          onClick={() => onSelect('housing')}\n          className={isSelected('housing')}>\n          Housing and Economics\n        </li>\n        <li onClick={() => onSelect('assets')} className={isSelected('assets')}>\n          Assets\n        </li>\n      </ul>\n    </div>\n  );\n}\n","import React, { useEffect, useState, useMemo } from \"react\";\n\nexport default function useFacilities() {\n    const [facilities, setFacilities] = useState(null);\n    useEffect(() => {\n        fetch(`${process.env.PUBLIC_URL}/facilities.geojson`)\n            .then(a => a.json())\n            .then(a => setFacilities(a));\n    }, []);\n    return facilities;\n}\n\nexport function useFilteredFacilities(id, layer, types) {\n    const facilities = useFacilities();\n    console.log(\"filtering facilities by \", id, layer, types);\n    const layerIDs = {\n        cd: \"community_district_id\",\n        tracts: \"census_tract_id\",\n        cc: \"city_council_district_id\",\n        sd: \"school_district_id\",\n        nta: \"nta_id\",\n        police_precincts: \"precinct_id\",\n        congress_districts: \"cong_dist_id\",\n        senate_districts: \"st_sen_dist_id\",\n        NOCCs: \"noccs_id\"\n    };\n    return useMemo(() => {\n        return id\n            ? facilities.features\n                  .filter(\n                      facility => facility.properties[layerIDs[layer]] == id\n                  )\n                  .filter(facility =>\n                      types && types.length > 0\n                          ? types.includes(facility.properties.asset_type)\n                          : true\n                  )\n                  .map(f => f.properties)\n            : [];\n    }, [id, facilities, layer, types]);\n}\n","import React, { useState, useCallback } from \"react\";\nimport { RadialChart } from \"react-vis\";\nimport FacilityCard from \"./FacilityCard\";\nimport SimpleBarChart from \"./SimpleBarChart\";\nimport PieCard from \"./PieCard\";\nimport FactCard from \"./FactCard\";\nimport AssetCategoryCard from \"./AssetCategoryCard\";\nimport DetailsSelector from \"./DetailsSelector\";\nimport { useFilteredFacilities } from \"../hooks/useFacilities\";\nimport { saveAs } from \"file-saver\";\n\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faDownload } from \"@fortawesome/free-solid-svg-icons\";\n\nexport default function Details({\n    feature,\n    onSelectFacility,\n    layer,\n    tract,\n    facilityTypes\n}) {\n    const [showFacilities, setShowFacilities] = useState(false);\n    const [showBoundaryData, setShowBoundaryData] = useState(true);\n\n    const [selectedDetails, setSelectedDetails] = useState(\"demographics\");\n\n    const facilities = useFilteredFacilities(\n        showBoundaryData\n            ? feature\n                ? feature.properties.geoid\n                : null\n            : tract\n            ? tract.properties.GEOID\n            : null,\n        showBoundaryData ? layer : \"tracts\",\n        facilityTypes\n    );\n\n    const makeRenting = feature => {\n        const properties = feature.properties;\n        return [\n            { name: \"Renters\", value: properties.own_vs_rent_rent },\n            { name: \"Owners\", value: properties.own_vs_rent_owner }\n        ];\n    };\n\n    const featureNames = {\n        tracts: \"Census Tract\",\n        cd: \"Community District\",\n        sd: \"School District\",\n        cc: \"City Council District\",\n        nat: \"Neighborhood Tablulation Area\",\n        NOCCs: \"NOCC\",\n        senate_districts: \"Senate District\",\n        police_precincts: \"Police Precinct\",\n        congress_districts: \"Congress Assembly District\"\n    };\n\n    const featureName = featureNames[layer];\n    const displayFeature =\n        showBoundaryData && layer !== \"tracts\"\n            ? feature\n            : tract && {\n                  ...tract,\n                  properties: {\n                      ...tract.properties,\n                      geoid: tract.properties.GEOID\n                  }\n              };\n    const downloadAssets = useCallback(() => {\n        let csv = [\"name\", \"address\", \"type\"].join(\",\") + \"\\n\";\n        csv += facilities\n            .map(f => [f.name, f.address, f.asset_type].join(\",\"))\n            .join(\"\\n\");\n        var blob = new Blob([csv], { type: \"text/plain;charset=utf-8\" });\n        const boundaryType = showBoundaryData ? layer : \"tract\";\n        const boundaryId = displayFeature.id;\n        console.log(boundaryType, boundaryId, facilities, displayFeature);\n\n        saveAs(blob, `assets_for_${boundaryType}-${boundaryId}.csv`);\n    }, [facilities, displayFeature]);\n\n    const makeAgeData = feature => {\n        const properties = feature.properties;\n        const data = [\n            {\n                name: \"5 years or younger\",\n                value: properties.age_less_5\n            },\n            {\n                name: \"6 yrs - 15 yrs\",\n                value: properties.age_6_15\n            },\n            {\n                name: \"16 yrs - 64 yrs\",\n                value: properties.age_16_64\n            },\n            {\n                name: \"65 yrs or older\",\n                value: properties.age_64_over\n            }\n        ];\n        return data;\n    };\n    const makeForeignData = feature => {\n        const properties = feature.properties;\n        return [\n            { name: \"US Born\", value: properties.foreign_born_native },\n            { name: \"Foreign Born\", value: properties.foreign_born_foreign }\n        ];\n    };\n    const makeEnglishData = feature => {\n        const properties = feature.properties;\n\n        return [\n            { name: \"English\", value: properties.english_english },\n            { name: \"Asian Languages\", value: properties.english_asian },\n            { name: \"Spanish\", value: properties.english_spanish },\n            { name: \"European Languages\", value: properties.english_european },\n            { name: \"Other\", value: properties.english_other }\n        ];\n    };\n    const makeInternetData = feature => {\n        const properties = feature.properties;\n        const data = [\n            { name: \"No Internet\", value: properties.internet_no_access },\n            {\n                name: \"Full Subscription\",\n                value: properties.internet_subscription\n            },\n            {\n                name: \"Limited Subscription\",\n                value: properties.internet_no_subscription\n            }\n        ];\n        console.log(properties);\n        return data;\n    };\n    const contactStrategy = feature => {\n        switch (feature.strategy_code) {\n            case 0:\n                return \"Internet First, English\";\n            case 1:\n                return \"Internet First, Bilingual\";\n            case 2:\n                return \"Internet Choice, English\";\n            case 3:\n                return \"Internet Choice, Bilingual\";\n        }\n    };\n    const makeDemographicData = feature => {\n        return [\n            {\n                name: \"white\",\n                value:\n                    feature.properties.race_white /\n                    feature.properties.race_total\n            },\n            {\n                name: \"black\",\n                value:\n                    feature.properties.race_black /\n                    feature.properties.race_total\n            },\n            {\n                name: \"asian\",\n                value:\n                    feature.properties.race_asian /\n                    feature.properties.race_total\n            },\n            {\n                name: \"latinx\",\n                value:\n                    feature.properties.race_hispanic /\n                    feature.properties.race_total\n            },\n            {\n                name: \"other\",\n                value:\n                    feature.properties.race_other /\n                    feature.properties.race_total\n            }\n        ];\n    };\n\n    const makeLEP = feature => {\n        const cols = [\n            \"LEPHHs\",\n            \"LEPspanHHs\",\n            \"LEPindoeurHHs\",\n            \"LEPapacHHs\",\n            \"LEPotherHHs\"\n        ];\n        const data = cols.map(col => ({\n            value: feature.properties[col],\n            title: col\n        }));\n        return data;\n    };\n\n    return displayFeature ? (\n        <React.Fragment>\n            <div className=\"overview\">\n                <div className=\"boundary-type-selector\">\n                    {feature && (\n                        <div\n                            className={`boundary-type-selector-type ${\n                                showBoundaryData ? \"\" : \"selected\"\n                            }`}\n                            onClick={() => setShowBoundaryData(true)}\n                        >\n                            <h2 className={showBoundaryData ? \"\" : \"selected\"}>\n                                {featureName}: {feature.properties.geoid}\n                            </h2>\n                        </div>\n                    )}\n                    {tract && (\n                        <div\n                            className={`boundary-type-selector-type ${\n                                showBoundaryData ? \"selected\" : \"\"\n                            }`}\n                            onClick={() => setShowBoundaryData(false)}\n                        >\n                            <h2>Census Tract: {tract.properties.GEOID}</h2>\n                        </div>\n                    )}\n                </div>\n                <div className=\"top-stats\">\n                    {displayFeature && (\n                        <p>\n                            Population:{\" \"}\n                            <span style={{ color: \"red\" }}>\n                                {Math.floor(\n                                    displayFeature.properties.total_population\n                                ).toLocaleString()}\n                            </span>\n                        </p>\n                    )}\n                    {showBoundaryData && feature ? (\n                        <>\n                            <p>\n                                Population in HTC areas:{\" \"}\n                                <span style={{ color: \"red\" }}>\n                                    {Math.floor(\n                                        (feature.properties.htc_pop * 100.0) /\n                                            feature.properties.total_population\n                                    ).toLocaleString()}\n                                    %\n                                </span>\n                            </p>\n                        </>\n                    ) : (\n                        tract && (\n                            <>\n                                <p>\n                                    Mail return rate 2010:{\" \"}\n                                    <span style={{ color: \"red\" }}>\n                                        {tract.properties.MRR2010}%\n                                    </span>\n                                </p>\n                                <p>\n                                    Inital Contact Strategy:{\" \"}\n                                    <span style={{ color: \"red\" }}>\n                                        {contactStrategy(tract.properties)}\n                                    </span>\n                                </p>\n                            </>\n                        )\n                    )}\n                    {selectedDetails === \"assets\" && (\n                        <p onClick={downloadAssets} className=\"download-assets\">\n                            <FontAwesomeIcon icon={faDownload} />\n                            Download Community Assets\n                        </p>\n                    )}\n                </div>\n            </div>\n            <div className=\"selector-cards\">\n                <DetailsSelector\n                    selected={selectedDetails}\n                    onSelect={detail => setSelectedDetails(detail)}\n                />\n                {displayFeature && (\n                    <div className=\"cards\">\n                        {selectedDetails === \"demographics\" && (\n                            <>\n                                <div className=\"card demographics\">\n                                    <PieCard\n                                        title=\"Race\"\n                                        data={makeDemographicData(\n                                            displayFeature\n                                        )}\n                                    />\n                                    <FactCard\n                                        title={\"\"}\n                                        facts={[\n                                            {\n                                                name: \"identify as Latinx\",\n                                                value:\n                                                    Math.floor(\n                                                        (displayFeature\n                                                            .properties\n                                                            .race_hispanic *\n                                                            100.0) /\n                                                            displayFeature\n                                                                .properties\n                                                                .race_total\n                                                    ).toLocaleString() + \"%\"\n                                            },\n                                            {\n                                                name: \"identify as Black\",\n                                                value:\n                                                    Math.floor(\n                                                        (displayFeature\n                                                            .properties\n                                                            .race_black *\n                                                            100.0) /\n                                                            displayFeature\n                                                                .properties\n                                                                .race_total\n                                                    ).toLocaleString() + \"%\"\n                                            }\n                                        ]}\n                                    />\n                                </div>\n                                <div className=\"card foreign\">\n                                    <PieCard\n                                        title=\"Foreign Born\"\n                                        data={makeForeignData(displayFeature)}\n                                    />\n                                </div>\n                                <div className=\"card age\">\n                                    <PieCard\n                                        title=\"Age\"\n                                        data={makeAgeData(displayFeature)}\n                                        norm={true}\n                                    />\n                                    <FactCard\n                                        title={\"\"}\n                                        facts={[\n                                            {\n                                                name:\n                                                    \"people under 5 years old\",\n                                                value: Math.floor(\n                                                    displayFeature.properties\n                                                        .age_less_5\n                                                ).toLocaleString()\n                                            }\n                                        ]}\n                                    />\n                                </div>\n                                <div className=\"card english_proficency\">\n                                    <PieCard\n                                        title=\"Limited English Proficency\"\n                                        data={makeEnglishData(displayFeature)}\n                                        norm={true}\n                                    />\n                                    <FactCard\n                                        title={\"\"}\n                                        facts={[\n                                            {\n                                                name:\n                                                    \"% of people are bilingual\",\n                                                value:\n                                                    (displayFeature.properties\n                                                        .bilingual *\n                                                        100.0) /\n                                                    displayFeature.properties\n                                                        .english_total_households\n                                            }\n                                        ]}\n                                    />\n                                </div>\n                            </>\n                        )}\n                        {selectedDetails === \"housing\" && (\n                            <>\n                                <div className=\"card internet\">\n                                    <PieCard\n                                        title=\"Internet Access\"\n                                        data={makeInternetData(displayFeature)}\n                                        norm={true}\n                                        style={{ width: \"500px\" }}\n                                    />\n                                    <FactCard\n                                        facts={[\n                                            {\n                                                name:\n                                                    \"people have no internet access\",\n                                                value: Math.floor(\n                                                    displayFeature.properties\n                                                        .internet_no_access\n                                                ).toLocaleString()\n                                            }\n                                        ]}\n                                    />\n                                </div>\n                                <div className=\"card housing\">\n                                    <PieCard\n                                        title=\"Housing Tenure\"\n                                        data={makeRenting(displayFeature)}\n                                    />\n                                </div>\n                            </>\n                        )}\n                        {selectedDetails === \"assets\" && (\n                            <>\n                                {facilityTypes && facilityTypes.length > 0 ? (\n                                    facilityTypes.map(type => (\n                                        <AssetCategoryCard\n                                            title={type}\n                                            key={type}\n                                            assets={facilities.filter(\n                                                f => f.asset_type === type\n                                            )}\n                                        />\n                                    ))\n                                ) : (\n                                    <div className=\"asset-placeholder\">\n                                        <h2>\n                                            Turn on some Community Assets to\n                                            view here\n                                        </h2>\n                                    </div>\n                                )}\n                            </>\n                        )}\n                    </div>\n                )}\n            </div>\n        </React.Fragment>\n    ) : (\n        <div className=\"placeholder\">\n            <h2>Click {featureName} for details</h2>\n        </div>\n    );\n}\n","import { useEffect, useRef } from \"react\";\n\nexport function useGeoJSONLayer(\n    map,\n    name,\n    { url, paintFill, paintLine, sourceLayer, onClick, selection, visible }\n) {\n    const fillLayer = useRef(null);\n    const lineLayer = useRef(null);\n    const source = useRef(null);\n    const source_name = `${name}_source`;\n    const oldSelectionID = useRef(null);\n    const metricChangeTimeout = useRef(null);\n    const visibilityChangeTimeout = useRef(null);\n\n    useEffect(() => {\n        if (map.current) {\n            map.current.on(\"load\", () => {\n                source.current = map.current.addSource(source_name, {\n                    type: \"geojson\",\n                    data: url\n                });\n\n                if (paintFill) {\n                    fillLayer.current = map.current.addLayer({\n                        id: `${name}-fill`,\n                        type: \"fill\",\n                        source: source_name,\n                        paint: paintFill,\n                        layout: {\n                            visibility: visible ? \"visible\" : \"none\"\n                        }\n                    });\n                }\n                if (paintLine) {\n                    lineLayer.current = map.current.addLayer({\n                        id: `${name}-line`,\n                        type: \"line\",\n                        source: source_name,\n                        paint: paintLine,\n                        layout: {\n                            visibility: visible ? \"visible\" : \"none\"\n                        }\n                    });\n                }\n                map.current.on(\"click\", `${name}-fill`, e => {\n                    console.log(e.features[0]);\n                    if (onClick) {\n                        onClick(e.features[0]);\n                    }\n                });\n            });\n        }\n    }, [map]);\n\n    useEffect(() => {\n        if (map.current && selection) {\n            if (oldSelectionID.current) {\n                map.current.setFeatureState(\n                    { source: source_name, id: oldSelectionID.current },\n                    { selected: false }\n                );\n            }\n\n            map.current.setFeatureState(\n                { source: source_name, id: selection.id },\n                { selected: true }\n            );\n            oldSelectionID.current = selection.id;\n        }\n    }, [selection]);\n\n    useEffect(() => {\n        if (map.current) {\n            const setVisibility = () => {\n                if (map.current.loaded()) {\n                    map.current.setLayoutProperty(\n                        `early_nrfu-fill`,\n                        \"visibility\",\n                        visible ? \"visible\" : \"none\"\n                    );\n                    map.current.setLayoutProperty(\n                        `early_nrfu-line`,\n                        \"visibility\",\n                        visible ? \"visible\" : \"none\"\n                    );\n                } else {\n                    if (visibilityChangeTimeout.current) {\n                        clearTimeout(visibilityChangeTimeout.current);\n                        visibilityChangeTimeout.current = null;\n                    }\n                    visibilityChangeTimeout.current = setTimeout(\n                        setVisibility,\n                        200\n                    );\n                }\n            };\n            setVisibility();\n        }\n    }, [map, visible]);\n\n    useEffect(() => {\n        if (map.current) {\n            const setPaint = () => {\n                if (map.current.loaded()) {\n                    map.current.setPaintProperty(\n                        `${name}-fill`,\n                        \"fill-color\",\n                        paintFill[\"fill-color\"]\n                    );\n                } else {\n                    if (metricChangeTimeout.current) {\n                        clearTimeout(metricChangeTimeout.current);\n                        metricChangeTimeout.current = null;\n                    }\n                    metricChangeTimeout.current = setTimeout(setPaint, 500);\n                }\n            };\n            setPaint();\n        }\n    }, [paintFill]);\n    return { fillLayer, source };\n}\n","export const fillStyles = {\n    strategy: [\n        \"match\",\n        [\"get\", \"strategy_code\"],\n        0,\n        \"#C2A5CF\",\n        1,\n        \"#9970AB\",\n        2,\n        \"#A6DBA0\",\n        3,\n        \"#5AAE61\",\n        \"grey\"\n    ],\n    blackPop: [\n        \"interpolate-lab\",\n        [\"linear\"],\n        [\"/\", [\"get\", \"race_black\"], [\"get\", \"race_total\"]],\n        0.0,\n        \"#FFFFFF\",\n        1.0,\n        \"#b93f22\"\n    ],\n    asianPop: [\n        \"interpolate-lab\",\n        [\"linear\"],\n        [\"/\", [\"get\", \"race_asian\"], [\"get\", \"race_total\"]],\n        0.0,\n        \"#FFFFFF\",\n        1.0,\n        \"#8f1158\"\n    ],\n    latinxPop: [\n        \"interpolate-lab\",\n        [\"linear\"],\n        [\"/\", [\"get\", \"race_hispanic\"], [\"get\", \"race_total\"]],\n        0.0,\n        \"#FFFFFF\",\n        1.0,\n        \"#cf0621\"\n    ],\n    whitePop: [\n        \"interpolate-lab\",\n        [\"linear\"],\n        [\"/\", [\"get\", \"race_white\"], [\"get\", \"race_total\"]],\n        0.0,\n        \"#FFFFFF\",\n        1.0,\n        \"#faaf12\"\n    ],\n    otherPop: [\n        \"interpolate-lab\",\n        [\"linear\"],\n        [\"/\", [\"get\", \"race_other\"], [\"get\", \"race_total\"]],\n        0.0,\n        \"#FFFFFF\",\n        1.0,\n        \"#00000\"\n    ],\n    noInternetPC: [\n        \"interpolate-lab\",\n        [\"linear\"],\n        [\"/\", [\"get\", \"internet_no_access\"], [\"get\", \"internet_total\"]],\n        0.0,\n        \"#FFFFFF\",\n        1.0,\n        \"#faaf12\"\n    ],\n    englishProficency: [\n        \"interpolate-lab\",\n        [\"linear\"],\n        [\n            \"-\",\n            1,\n            [\n                \"/\",\n                [\"get\", \"english_english\"],\n                [\"get\", \"english_total_households\"]\n            ]\n        ],\n        0.0,\n        \"#FFFFFF\",\n        1.0,\n        \"#faaf12\"\n    ],\n    under5: [\n        \"interpolate-lab\",\n        [\"linear\"],\n        [\"/\", [\"get\", \"age_less_5\"], [\"get\", \"age_total\"]],\n        0.0,\n        \"#FFFFFF\",\n        0.1,\n        \"#faaf12\"\n    ],\n    returnCount: [\n        \"step\",\n        [\"get\", \"MRR2010\"],\n        \"#b95356\",\n        60,\n        \"#ee5658\",\n        65,\n        \"#ecbaa8\",\n        70,\n        \"#f9bd53\",\n        73,\n        [\"rgba\", 0, 0, 0, 0]\n    ]\n};\n\nexport default {\n    HTCLayer: {\n        //url: `${process.env.PUBLIC_URL}/CensusTractsAllVariables.geojson`,\n        url: `${process.env.PUBLIC_URL}/census_tracts.geojson`,\n        paintFill: {\n            \"fill-color\": \"grey\",\n            \"fill-opacity\": 0.7\n        },\n        paintLine: {\n            \"line-color\": [\n                \"case\",\n                [\n                    \"boolean\",\n                    [\"coalesce\", [\"feature-state\", \"selected\"], false],\n                    true\n                ],\n                \"red\",\n                \"white\"\n            ],\n            \"line-width\": [\n                \"case\",\n                [\n                    \"boolean\",\n                    [\"coalesce\", [\"feature-state\", \"selected\"], false],\n                    true\n                ],\n                3,\n                1\n            ]\n        }\n    },\n    EarlyNRFU: {\n        url: `${process.env.PUBLIC_URL}/boundaries/EarlyNRFULocations.geojson`,\n        paintFill: {\n            \"fill-color\": \"blue\",\n            \"fill-opacity\": 0.7\n        }\n    }\n};\n\nexport function BoundaryLayers() {\n    const layer_list = [\n        {\n            id: \"NOCCs\",\n            datasetName: \"NOCCS\",\n            polygons: \"noccs_with_vars.geojson\",\n            labels: \"noccs_labels.geojson\",\n            url:\n                \"http://data.cityofnewyork.us/api/geospatial/cpf4-rkhq?method=export&format=Shapefile\",\n            nameCol: \"ntaname\",\n            nameAlt: \"ntacode\"\n        },\n        {\n            id: \"sd\",\n            datasetName: \"School Districts\",\n            polygons: \"school_districts_with_vars.geojson\",\n            labels: \"school_district_labels.geojson\",\n            url:\n                \"http://data.cityofnewyork.us/api/geospatial/r8nu-ymqj?method=export&format=Shapefile\",\n            nameCol: \"district\",\n            nameAlt: \"districtco\"\n        },\n        {\n            id: \"police_precincts\",\n            datasetName: \"Police Precincts\",\n            polygons: \"police_precincts_with_vars.geojson\",\n            labels: \"police_precincts_labels.geojson\",\n            url:\n                \"http://data.cityofnewyork.us/api/geospatial/yusd-j4xi?method=export&format=Shapefile\",\n            nameCol: \"geoid\",\n            nameAlt: null\n        },\n        {\n            id: \"cd\",\n            datasetName: \"Community Districts\",\n            polygons: \"community_districts_vars.geojson\",\n            labels: \"communty_district_labels.geojson\",\n            url:\n                \"http://data.cityofnewyork.us/api/geospatial/yfnk-k7r4?method=export&format=Shapefile\",\n            nameCol: \"boro_cd\",\n            nameAlt: null\n        },\n        {\n            id: \"cc\",\n            datasetName: \"City Council Districts\",\n            polygons: \"city_council_district_with_vars.geojson\",\n            labels: \"city_council_district_labels.geojson\",\n            url:\n                \"http://data.cityofnewyork.us/api/geospatial/yusd-j4xi?method=export&format=Shapefile\",\n            nameCol: \"coun_dist\",\n            nameAlt: null\n        },\n        {\n            id: \"congress_districts\",\n            datasetName: \"Congress Assembly Districts\",\n            polygons: \"congress_assembly_with_vars.geojson\",\n            labels: \"congress_assembly_district_labels.geojson\",\n            url:\n                \"http://data.cityofnewyork.us/api/geospatial/yusd-j4xi?method=export&format=Shapefile\",\n            nameCol: \"geoid\",\n            nameAlt: null\n        },\n        {\n            id: \"senate_districts\",\n            datasetName: \"Senate Districts\",\n            polygons: \"senate_districts_with_vars.geojson\",\n            labels: \"senate_districts_with_vars.geojson\",\n            url:\n                \"http://data.cityofnewyork.us/api/geospatial/yusd-j4xi?method=export&format=Shapefile\",\n            nameCol: \"st_sen_dist\",\n            nameAlt: null\n        }\n        /*{\n      id: 'pp',\n      datasetName: 'Police Precincts',\n      url:\n        'http://data.cityofnewyork.us/api/geospatial/78dh-3ptz?method=export&format=Shapefile',\n      nameCol: 'precinct',\n      nameAlt: null,\n    },\n    {\n      id: 'hc',\n      datasetName: 'Health Center Districts',\n      url:\n        'http://data.cityofnewyork.us/api/geospatial/b55q-34ps?method=export&format=Shapefile',\n      nameCol: 'hcent_dist',\n      nameAlt: null,\n    },\n    {\n      id: 'nycongress',\n      datasetName: 'Congressional Districts',\n      url:\n        'http://data.cityofnewyork.us/api/geospatial/qd3c-zuu7?method=export&format=Shapefile',\n      nameCol: 'cong_dist',\n      nameAlt: null,\n    },\n    {\n      id: 'sa',\n      datasetName: 'State Assembly Districts',\n      url:\n        'http://data.cityofnewyork.us/api/geospatial/pf5b-73bw?method=export&format=Shapefile',\n      nameCol: 'assem_dist',\n      nameAlt: null,\n    },\n    {\n      id: 'ss',\n      datasetName: 'State Senate Districts',\n      url:\n        'http://data.cityofnewyork.us/api/geospatial/h4i2-acfi?method=export&format=Shapefile',\n      nameCol: 'st_sen_dis',\n      nameAlt: null,\n    },\n    {\n      id: 'bid',\n      datasetName: 'Business Improvement District',\n      url:\n        'http://data.cityofnewyork.us/api/geospatial/ejxk-d93y?method=export&format=Shapefile',\n      nameCol: 'bid',\n      nameAlt: null,\n    },\n    /*{\n      id: 'zipcode',\n      datasetName: 'Zip Code',\n      url: 'http://data.cityofnewyork.us/download/i8iw-xf4u/application%2Fzip',\n      nameCol: 'ZIPCODE',\n      nameAlt: null,\n},*/\n    ];\n\n    return layer_list.map(layer => ({\n        ...layer,\n        paintLine: {\n            \"line-color\": \"black\"\n        }\n    }));\n}\n","import React, { useEffect } from \"react\";\nimport useFacilities from \"./useFacilities\";\n\nfunction loadAllImages(map) {\n    const images = [\n        \"Dot_Hospitals.png\",\n        \"Dot_FBO.png\",\n        \"Dot_CommunitySchools.png\",\n        \"Dot_LGBTQ.png\",\n        \"Dot_FoodKitchens.png\",\n        \"Dot_SeniorCenters.png\",\n        \"Dot_UniPreK.png\",\n        \"Dot_K12.png\",\n        \"Dot_CommunityCenters.png\",\n        \"Dot_MentalHealth.png\",\n        \"Dot_CBO.png\",\n        \"Dot_Libraries.png\"\n    ];\n    return Promise.all(\n        images.map(\n            img =>\n                new Promise((resolve, reject) => {\n                    map.loadImage(\n                        `${process.env.PUBLIC_URL}/imgs/${img}`,\n                        function(error, res) {\n                            map.addImage(img, res);\n                            resolve();\n                        }\n                    );\n                })\n        )\n    );\n}\n\nexport default function useFacilitiesLayer(map, visible, selectedTypes) {\n    const facilities = useFacilities();\n    const types = facilities\n        ? facilities.features.reduce((set, f) => {\n              set.add(f.properties.asset_type);\n              return set;\n          }, new Set())\n        : [];\n\n    useEffect(() => {\n        if (map.current && facilities) {\n            map.current.on(\"load\", () => {\n                loadAllImages(map.current).then(() => {\n                    types.forEach(type => {\n                        map.current.addLayer({\n                            id: `facilities: ${type}`,\n                            type: \"symbol\",\n                            source: {\n                                type: \"geojson\",\n                                data: {\n                                    ...facilities,\n                                    features: facilities.features.filter(\n                                        f => f.properties.asset_type === type\n                                    )\n                                }\n                            },\n\n                            layout: {\n                                \"icon-image\": [\"get\", \"icon\"],\n                                \"icon-size\": 0.02,\n                                \"text-field\": [\"get\", \"name\"],\n                                \"text-font\": [\n                                    \"Open Sans Semibold\",\n                                    \"Arial Unicode MS Bold\"\n                                ],\n                                \"text-offset\": [0, 0.6],\n                                \"text-size\": 13,\n                                \"text-anchor\": \"top\",\n                                //'icon-allow-overlap': true,\n                                //              'text-allow-overlap': true,\n                                visibility: selectedTypes.includes(type)\n                                    ? \"visible\"\n                                    : \"none\"\n                            },\n                            //    filter: ['match', ['get', 'asset_type'], types, true, false],\n\n                            paint: {\n                                \"text-color\": \"rgba(255,255,255,1)\",\n                                \"text-halo-color\": \"rgba(10, 10, 10, 0.8)\",\n                                \"text-halo-width\": 1,\n                                \"text-halo-blur\": 0\n                            }\n                        });\n                    });\n                });\n            });\n        }\n    }, [map, facilities]);\n\n    useEffect(() => {\n        types.forEach(type => {\n            map.current.setLayoutProperty(\n                `facilities: ${type}`,\n                \"visibility\",\n                selectedTypes.includes(type) ? \"visible\" : \"none\"\n            );\n        });\n    }, [selectedTypes, map, types]);\n\n    useEffect(() => {\n        if (map.current && map.current.loaded()) {\n            console.log(\"Toggling visible on facilities\");\n            map.current.setLayoutProperty(\n                `facilities`,\n                \"visibility\",\n                visible ? \"visible\" : \"none\"\n            );\n        }\n    }, [map, visible]);\n\n    return facilities;\n}\n","import React, { useRef, useState, useEffect, useCallback } from \"react\";\nimport { useMap } from \"../hooks/useMap\";\nimport Legend from \"../components/Legend\";\nimport Details from \"../components/Details\";\nimport Papa from \"papaparse\";\nimport * as turf from \"@turf/turf\";\nimport { useGeoJSONLayer } from \"../hooks/useGeoJSONLayer\";\nimport useBoundaryLayers from \"../hooks/useBoundaryLayers\";\nimport useFacilitiesLayer from \"../hooks/useFacilitiesLayer\";\nimport Layers, { fillStyles } from \"../Layers\";\nimport ReactGA from \"react-ga\";\nimport queryString from \"query-string\";\n\nexport default function MainPage() {\n    const mapDiv = useRef(null);\n    const [selectedBoundary, setSelectedBoundary] = useState(\"NOCCs\");\n    const [selectedTract, setSelectedTract] = useState(null);\n    const [selectedFeature, setSelectedFeature] = useState(null);\n    const [hardToCountStats, setHardToCountStats] = useState([]);\n    const [showFacilities, setShowFacilities] = useState(true);\n    const [selectedFacilityTypes, setSelectedFacilityTypes] = useState([]);\n    const [metric, setMetric] = useState(\"strategy\");\n    const [showENRFU, setShowNRFU] = useState(false);\n\n    useEffect(() => {\n        ReactGA.initialize(\"UA-159011122-1\");\n        ReactGA.pageview(window.location.pathname + window.location.search);\n    }, []);\n\n    useEffect(() => {\n        Papa.parse(\"/hard_to_count_NY.csv\", {\n            download: true,\n            header: true,\n            complete: function(results) {\n                setHardToCountStats(results);\n            }\n        });\n    }, []);\n\n    const onToggleFacilityType = types => {\n        let newList = [...selectedFacilityTypes];\n        types.forEach(type => {\n            if (newList.includes(type)) {\n                newList = newList.filter(t => t !== type);\n            } else {\n                newList = [...newList, type];\n            }\n        });\n        setSelectedFacilityTypes(newList);\n    };\n\n    const { map, zoomToBounds } = useMap(mapDiv, {\n        lnglat: [-73.9920330193022, 40.75078660435196],\n        zoom: 10,\n        style: \"mapbox://styles/mapbox/light-v10\",\n        key:\n            \"pk.eyJ1Ijoic3R1YXJ0LWx5bm4iLCJhIjoiM2Q4ODllNmRkZDQ4Yzc3NTBhN2UyNDE0MWY2OTRiZWIifQ.8OEKvgZBCCtDFUXkjt66Pw\"\n    });\n\n    useEffect(() => {\n        const params = queryString.parse(window.location.search);\n        if (params.layer) {\n            setSelectedBoundary(params.layer);\n        }\n        if (params.metric) {\n            setMetric(params.metric);\n        }\n        if (params.nrfu) {\n            setShowNRFU(params.nrfu === \"yes\");\n        }\n        if (params.boundaryID) {\n            const zoomToFeature = () => {\n                if (\n                    map.current &&\n                    map.current.isStyleLoaded &&\n                    map.current.getLayer(params.layer + \"-fill\") &&\n                    map.current.querySourceFeatures(params.layer + \"_source\")\n                        .length > 0\n                ) {\n                    const features = map.current.querySourceFeatures(\n                        params.layer + \"_source\"\n                    );\n                    const sf = features.find(\n                        f => f.id + \"\" === params.boundaryID\n                    );\n                    if (sf) {\n                        setSelectedFeature(sf);\n                        let bounds = turf.bbox(\n                            turf.buffer(sf, 1, { units: \"miles\" })\n                        );\n                        console.log(\"bounds \", bounds);\n                        map.current.fitBounds(bounds);\n                    }\n                } else {\n                    setTimeout(zoomToFeature, 500);\n                }\n            };\n            zoomToFeature();\n        }\n    }, [window.location.search]);\n\n    const searchBox = useRef(null);\n\n    useEffect(() => {\n        setSelectedFeature(null);\n    }, [selectedBoundary]);\n\n    const style = {\n        ...Layers.HTCLayer,\n        ...{\n            paintFill: { \"fill-color\": fillStyles[metric], \"fill-opacity\": 0.7 }\n        }\n    };\n\n    const GeojsonLayer = useGeoJSONLayer(map, \"HTC\", {\n        ...style,\n        onClick: setSelectedTract,\n        selection: selectedTract,\n        visible: true\n    });\n\n    const EarlyNRFULocations = useGeoJSONLayer(map, \"early_nrfu\", {\n        ...Layers.EarlyNRFU,\n        visible: showENRFU\n    });\n\n    // BoundaryLayers().forEach(layer => {\n    const boundaryLayers = useBoundaryLayers(\n        map,\n        selectedBoundary,\n        null,\n        selectedBoundary,\n        selectedFeature ? selectedFeature.id : null,\n        boundary => {\n            setSelectedTract(null);\n            setSelectedFeature(boundary);\n        }\n    );\n\n    const facilities = useFacilitiesLayer(\n        map,\n        showFacilities,\n        selectedFacilityTypes\n    );\n\n    let shareURL = `${window.location.origin}?layer=${selectedBoundary}&metric=${metric}`;\n    if (selectedFeature) {\n        shareURL += `&boundaryID=${selectedFeature.id}`;\n    }\n    return (\n        <div className=\"main-page\">\n            <div className=\"map\" ref={mapDiv} />\n            <div className=\"info overlay\">\n                <h2>NYC CENSUS 2020 INTERACTIVE MAP</h2>\n                <p>\n                    This map is a tool to identify community-based assets, learn\n                    about historically undercounted communities, and visualize\n                    geographically relevant Census data for 2020 Census efforts.\n                </p>\n                <p>\n                    If you are creating an outreach strategy to get your\n                    neighborhood counted, this tool can help! For more\n                    information about the map and how to submit data for your\n                    neighborhood click on the \"?\" below.\n                </p>\n                <div ref={searchBox} />\n            </div>\n            <div className=\"details overlay\">\n                <Details\n                    feature={selectedFeature}\n                    tract={selectedTract}\n                    layer={selectedBoundary}\n                    facilityTypes={selectedFacilityTypes}\n                />{\" \"}\n            </div>\n            <Legend\n                boundaries={boundaryLayers}\n                selectedBoundary={selectedBoundary}\n                onSelectBoundary={setSelectedBoundary}\n                showFacilities={showFacilities}\n                onShowFacilitiesChange={setShowFacilities}\n                selectedFacilityTypes={selectedFacilityTypes}\n                onSelectFacilityType={onToggleFacilityType}\n                metric={metric}\n                onSelectMetric={setMetric}\n                showENRFU={showENRFU}\n                onToggleENRFU={setShowNRFU}\n                shareURL={shareURL}\n            />\n        </div>\n    );\n}\n","import { useState, useRef, useEffect, useCallback } from \"react\";\nimport mapboxgl from \"mapbox-gl\";\nimport MapboxGeocoder from \"@mapbox/mapbox-gl-geocoder\";\nimport \"mapbox-gl/dist/mapbox-gl.css\";\nimport \"@mapbox/mapbox-gl-geocoder/lib/mapbox-gl-geocoder.css\";\nimport style from \"../map_style\";\n\nexport function useMap(mapDivRef, { lnglat, zoom, key }) {\n    const [mapLoaded, setMapLoaded] = useState(false);\n    mapboxgl.accessToken = key;\n    const map = useRef(null);\n    useEffect(() => {\n        map.current = new mapboxgl.Map({\n            container: mapDivRef.current, // container id\n            style: style, // stylesheet location\n            center: lnglat, // starting position [lng, lat]\n            zoom: zoom // starting zoom\n        });\n        map.current.addControl(\n            new MapboxGeocoder({\n                accessToken: mapboxgl.accessToken,\n                mapboxgl: mapboxgl\n            })\n        );\n        map.current.addControl(new mapboxgl.ScaleControl(), \"top-right\");\n        map.current.addControl(new mapboxgl.NavigationControl());\n        window.map = map;\n    }, [mapDivRef]);\n\n    const zoomToBounds = bounds => {\n        if (map.current) {\n            map.current.fitBounds([\n                [32.958984, -5.353521],\n                [43.50585, 5.615985]\n            ]);\n        }\n    };\n\n    return { map, zoomToBounds };\n}\n","import React, { useEffect, useState, useRef } from \"react\";\nimport { BoundaryLayers } from \"../Layers\";\n\nexport default function useBoundaryLayers(\n    map,\n    selectedLayer,\n    selectedVar,\n    onSelectLayer,\n    selectedGeomID,\n    onClick\n) {\n    const [layers, setLayers] = useState({});\n    const oldSelectionID = useRef(null);\n    const boundaryLayerChangeTimeout = useRef(null);\n\n    useEffect(() => {\n        if (map.current) {\n            let layerList = {};\n            map.current.on(\"load\", () => {\n                const boundaryLayers = BoundaryLayers();\n                boundaryLayers.forEach(layer => {\n                    const sourceName = `${layer.id}_source`;\n\n                    let layerDeets = { ...layer };\n                    layerDeets.source = map.current.addSource(sourceName, {\n                        type: \"geojson\",\n                        data: `${process.env.PUBLIC_URL}/boundaries/${layer.polygons}`\n                    });\n\n                    layerDeets.sourceLabels = map.current.addSource(\n                        sourceName + \"_labels\",\n                        {\n                            type: \"geojson\",\n                            data: `${process.env.PUBLIC_URL}/boundaries/${layer.labels}`\n                        }\n                    );\n\n                    layerDeets.fillLayer = map.current.addLayer({\n                        id: `${layer.id}-fill`,\n                        type: \"fill\",\n                        source: sourceName,\n                        paint: {\n                            \"fill-color\": \"grey\",\n                            \"fill-opacity\": [\n                                \"case\",\n                                [\n                                    \"boolean\",\n                                    [\n                                        \"coalesce\",\n                                        [\"feature-state\", \"selected\"],\n                                        false\n                                    ],\n                                    true\n                                ],\n                                0,\n                                0.3\n                            ]\n                        },\n                        layout: {\n                            visibility:\n                                selectedLayer == layer.id ? \"visible\" : \"none\"\n                        }\n                    });\n\n                    if (layer.paintLine) {\n                        layerDeets.lineLayer = map.current.addLayer({\n                            id: `${layer.id}-line`,\n                            type: \"line\",\n                            source: sourceName,\n                            paint: {\n                                \"line-color\": [\n                                    \"case\",\n                                    [\n                                        \"boolean\",\n                                        [\n                                            \"coalesce\",\n                                            [\"feature-state\", \"selected\"],\n                                            false\n                                        ],\n                                        true\n                                    ],\n                                    \"red\",\n                                    \"black\"\n                                ],\n\n                                \"line-width\": [\n                                    \"case\",\n                                    [\n                                        \"boolean\",\n                                        [\n                                            \"coalesce\",\n                                            [\"feature-state\", \"selected\"],\n                                            false\n                                        ],\n                                        true\n                                    ],\n                                    4,\n                                    1\n                                ]\n                            },\n                            layout: {\n                                visibility:\n                                    selectedLayer == layer.id\n                                        ? \"visible\"\n                                        : \"none\"\n                            }\n                        });\n                    }\n\n                    layerDeets.labelLayer = map.current.addLayer({\n                        id: `${layer.id}-labels`,\n                        type: \"symbol\",\n                        source: sourceName + \"_labels\",\n                        layout: {\n                            visibility:\n                                selectedLayer == layer.id ? \"visible\" : \"none\",\n                            \"text-field\": [\"get\", \"geoid\"],\n                            \"text-font\": [\n                                \"Open Sans Semibold\",\n                                \"Arial Unicode MS Bold\"\n                            ],\n                            \"text-offset\": [0, 0.0],\n                            \"text-size\": 15,\n                            \"text-anchor\": \"top\",\n                            \"text-allow-overlap\": false\n                        }\n                    });\n                    layerList[layer.id] = layerDeets;\n                });\n                setLayers(layerList);\n            });\n        }\n    }, [map]);\n\n    useEffect(() => {\n        if (map.current) {\n            const updateVisibility = () => {\n                if (\n                    map.current.isStyleLoaded() &&\n                    map.current.getLayer(selectedLayer + \"-fill\")\n                ) {\n                    console.log(\n                        \"Actually changing layers \",\n                        selectedLayer,\n                        layers\n                    );\n                    Object.entries(layers).forEach(([id, layer]) => {\n                        console.log(\"comparing \", id, selectedLayer);\n                        map.current.setFeatureState(\n                            {\n                                source: layer.id + \"_source\",\n                                id: oldSelectionID.current\n                            },\n                            { selected: false }\n                        );\n                        map.current.setLayoutProperty(\n                            `${layer.id}-line`,\n                            \"visibility\",\n                            id == selectedLayer ? \"visible\" : \"none\"\n                        );\n                        map.current.setLayoutProperty(\n                            `${layer.id}-labels`,\n                            \"visibility\",\n                            id == selectedLayer ? \"visible\" : \"none\"\n                        );\n                        map.current.setLayoutProperty(\n                            `${layer.id}-fill`,\n                            \"visibility\",\n                            id == selectedLayer ? \"visible\" : \"none\"\n                        );\n                    });\n                } else {\n                    if (boundaryLayerChangeTimeout.current) {\n                        clearTimeout(boundaryLayerChangeTimeout.current);\n                        boundaryLayerChangeTimeout.current = null;\n                    }\n                    boundaryLayerChangeTimeout.current = setTimeout(\n                        updateVisibility,\n                        500\n                    );\n                }\n            };\n            updateVisibility();\n        }\n    }, [map, selectedLayer, layers]);\n\n    useEffect(() => {\n        const source_name = `${selectedLayer}_source`;\n\n        if (map.current && selectedGeomID) {\n            if (oldSelectionID.current) {\n                map.current.setFeatureState(\n                    { source: source_name, id: oldSelectionID.current },\n                    { selected: false }\n                );\n            }\n\n            map.current.setFeatureState(\n                { source: source_name, id: selectedGeomID },\n                { selected: true }\n            );\n            oldSelectionID.current = selectedGeomID;\n        }\n    }, [selectedGeomID, selectedLayer, map]);\n\n    useEffect(() => {\n        if (map.current) {\n            const boundaryLayers = BoundaryLayers();\n            boundaryLayers.forEach(layer => {\n                map.current.on(\"click\", `${layer.id}-fill`, e => {\n                    if (onClick) {\n                        onClick(e.features[0], layer.id);\n                    }\n                });\n            });\n        }\n    }, [map]);\n    return layers;\n}\n","import React from 'react';\nimport {BrowserRouter as Router, Route} from 'react-router-dom';\nimport MainPage from './pages/MainPage';\nimport './App.scss';\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <Router basename={process.env.PUBLIC_URL}>\n        <Route path=\"/\" component={MainPage} />\n      </Router>\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}