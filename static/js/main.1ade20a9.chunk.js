(this.webpackJsonpmap=this.webpackJsonpmap||[]).push([[0],{51:function(e,t,a){e.exports=a(84)},56:function(e,t,a){},81:function(e,t,a){},84:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),l=a(29),c=a.n(l),i=(a(56),a(46)),o=a(9),s=a(14),u=a(3),m=a(30),p=a.n(m);a(57);var d=a(16),f=a(17);function y(){return r.a.createElement("section",{className:"contact-type"},r.a.createElement("ul",null,r.a.createElement("li",{className:"category-entry"},r.a.createElement(d.a,{icon:f.a,style:{color:"#C2A5CF"}})," ","Internet First, English"),r.a.createElement("li",{className:"category-entry"},r.a.createElement(d.a,{icon:f.a,style:{color:"#9970AB"}})," ","Internet First, Bilingual"),r.a.createElement("li",{className:"category-entry"},r.a.createElement(d.a,{icon:f.a,style:{color:"#A6DBA0"}})," ","Internet Choice, English"),r.a.createElement("li",{className:"category-entry"},r.a.createElement(d.a,{icon:f.a,style:{color:"#5AAE61"}})," ","Internet Choice, Bilingual")))}var h=a(43),b=a.n(h);a(63);function E(e){var t=e.boundaries,a=e.selectedBoundary,n=e.onSelect;return r.a.createElement("section",{className:"boundary-selector"},r.a.createElement("h4",null,"Boundaries"),t&&r.a.createElement(b.a,{options:Object.entries(t).map((function(e){var t=Object(u.a)(e,2);return{value:t[0],label:t[1].datasetName}})),onChange:function(e){return n(e.value)},value:a,placeholder:"Select a boundary"}))}function g(e){var t=e.selectedBoundary,a=e.boundaries,n=e.onSelectBoundary,l=e.showFacilities,c=e.onShowFacilitiesChange;return r.a.createElement("div",{className:"Legend"},r.a.createElement("section",{className:"thematic-layer"},r.a.createElement(y,null),r.a.createElement(E,{selectedBoundary:t,onSelect:n,boundaries:a}),r.a.createElement("div",{className:"facilitesToggle"},r.a.createElement("p",null,"Show Facilities"," ",r.a.createElement("input",{type:"checkbox",checked:l,onChange:function(e){return c(e.target.checked)}})))))}var C=a(34);function v(e){var t=e.facility;return console.log("facilty",t),r.a.createElement("div",{className:"card facility"},r.a.createElement("h3",null,t.facname),r.a.createElement("p",null,t.address," ",r.a.createElement("br",null)," ",t.boro," ",r.a.createElement("br",null)," ",t.city," ",r.a.createElement("br",null)," ",t.zipcode),r.a.createElement("p",null,t.factype," "),r.a.createElement("p",null,"Capacity: ",t.capacity?t.capacity:"Unknown"))}function O(e){var t=e.feature,a=e.facilities;e.onSelectFacility;console.log(t);var l=Object(n.useState)(!1),c=Object(u.a)(l,2),i=c[0],o=c[1];return r.a.createElement("div",{className:"feature"},t?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"details-header"},r.a.createElement("h2",null,"Census Tract: ",t.properties.GEOID),r.a.createElement("p",null,r.a.createElement("span",{onClick:function(){return o(!1)},className:i?"":"selected"},"Stats")," ","/"," ",r.a.createElement("span",{onClick:function(){return o(!0)},className:i?"selected":""},"Facilities"))),r.a.createElement("div",{className:"cards"},i?a.map((function(e){return r.a.createElement(v,{facility:e})})):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"card basic"},r.a.createElement("h3",null,"Basic Info"),r.a.createElement("p",null,"Population ",t.properties.TotPopACS17),r.a.createElement("p",null,"Mail return rate 2010 :",t.properties.MRR2010,"%")),r.a.createElement("div",{className:"card demographics"},r.a.createElement("h3",null,"Demographics"),r.a.createElement("p",null,"White :"," ",t.properties.WhiteAloneOrCombo/t.properties.TotPopACS17," ","%"),r.a.createElement("p",null,"Black:"," ",t.properties.BlackAloneOrCombo/t.properties.TotPopACS17," ","%"),r.a.createElement("p",null,"Asian:"," ",t.properties.AsianAloneOrCombo/t.properties.TotPopACS17," ","%"),r.a.createElement("p",null,"Hispanic:"," ",t.properties.Hispanic/t.properties.TotPopACS17," ","%")),r.a.createElement("div",{className:"card english_proficency"},r.a.createElement("h3",null,"English Proficency"),r.a.createElement(C.a,{width:200,height:200,data:function(e){return["LEPHHs","LEPspanHHs","LEPindoeurHHs","LEPapacHHs","LEPotherHHs"].map((function(t){return{angle:e.properties[t],label:t}}))}(t),showLabels:!0,labelsRadiusMultiplier:1.1,labelsStyle:{fontSize:12},innerRadius:80,radius:100})),r.a.createElement("div",{className:"card internet"},r.a.createElement("h3",null,"Internet"),r.a.createElement(C.a,{width:200,height:200,data:function(e){return["NoInternet","Internet_NoSub","Internet","DialUpOnly","Broadband_Any","Cellular","CellularOnly","Broadband_CableFiberOpticDSL","Broadband_CableFiberOpticDSLOnly","Satellite","SatelliteOnly","OtherOnly"].map((function(t){return{angle:e.properties[t],label:t}}))}(t),showLabels:!0,labelsRadiusMultiplier:1.1,labelsStyle:{fontSize:12,color:"white"}}))))):r.a.createElement("h2",null,"Click to see details of feature"))}var S=a(45),j=a.n(S);var N={HTCLayer:{url:"".concat("/NYCCensusCountMap","/CensusTractsAllVariables.geojson"),paintFill:{"fill-color":["match",["get","strategy_code"],0,"#C2A5CF",1,"#9970AB",2,"#A6DBA0",3,"#5AAE61","grey"],"fill-opacity":.7},paintLine:{"line-color":"white"}}};function w(e,t){var a=Object(n.useState)({}),r=Object(u.a)(a,2),l=r[0],c=r[1];return Object(n.useEffect)((function(){if(e.current){var a={};e.current.on("load",(function(){console.log("adding boundary layers"),[{id:"cd",datasetName:"Community Districts",url:"http://data.cityofnewyork.us/api/geospatial/yfnk-k7r4?method=export&format=Shapefile",nameCol:"boro_cd",nameAlt:null},{id:"pp",datasetName:"Police Precincts",url:"http://data.cityofnewyork.us/api/geospatial/78dh-3ptz?method=export&format=Shapefile",nameCol:"precinct",nameAlt:null},{id:"sd",datasetName:"School Districts",url:"http://data.cityofnewyork.us/api/geospatial/r8nu-ymqj?method=export&format=Shapefile",nameCol:"district",nameAlt:"districtco"},{id:"hc",datasetName:"Health Center Districts",url:"http://data.cityofnewyork.us/api/geospatial/b55q-34ps?method=export&format=Shapefile",nameCol:"hcent_dist",nameAlt:null},{id:"cc",datasetName:"City Council Districts",url:"http://data.cityofnewyork.us/api/geospatial/yusd-j4xi?method=export&format=Shapefile",nameCol:"coun_dist",nameAlt:null},{id:"nycongress",datasetName:"Congressional Districts",url:"http://data.cityofnewyork.us/api/geospatial/qd3c-zuu7?method=export&format=Shapefile",nameCol:"cong_dist",nameAlt:null},{id:"sa",datasetName:"State Assembly Districts",url:"http://data.cityofnewyork.us/api/geospatial/pf5b-73bw?method=export&format=Shapefile",nameCol:"assem_dist",nameAlt:null},{id:"ss",datasetName:"State Senate Districts",url:"http://data.cityofnewyork.us/api/geospatial/h4i2-acfi?method=export&format=Shapefile",nameCol:"st_sen_dis",nameAlt:null},{id:"nta",datasetName:"Neighborhood Tabulation Area",url:"http://data.cityofnewyork.us/api/geospatial/cpf4-rkhq?method=export&format=Shapefile",nameCol:"ntaname",nameAlt:"ntacode"},{id:"bid",datasetName:"Business Improvement District",url:"http://data.cityofnewyork.us/api/geospatial/ejxk-d93y?method=export&format=Shapefile",nameCol:"bid",nameAlt:null}].map((function(e){return Object(s.a)({},e,{paintLine:{"line-color":"black"}})})).forEach((function(n){var r="".concat(n.id,"_source"),l=Object(s.a)({},n);console.log("adding source ",r),l.source=e.current.addSource(r,{type:"geojson",data:"".concat("/NYCCensusCountMap","/boundaries/").concat(n.id,".geojson")}),n.paintFill&&(l.fillLayer=e.current.addLayer({id:"".concat(n.id,"-fill"),type:"fill",source:r,paint:n.paintFill},"waterway-label")),n.paintLine&&(l.lineLayer=e.current.addLayer({id:"".concat(n.id,"-line"),type:"line",source:r,paint:n.paintLine,layout:{visibility:t==n.id?"visible":"none"}},"waterway-label")),a[n.id]=l})),c(a)}))}}),[e]),Object(n.useEffect)((function(){e.current&&Object.entries(l).forEach((function(a){var n=Object(u.a)(a,2),r=n[0],l=n[1];e.current.setLayoutProperty("".concat(l.id,"-line"),"visibility",r==t?"visible":"none")}))}),[e,t]),l}function k(e,t){var a=function(){var e=Object(n.useState)(null),t=Object(u.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){fetch("".concat("/NYCCensusCountMap","/facilities.geojson")).then((function(e){return e.json()})).then((function(e){return r(e)}))}),[]),a}();return Object(n.useEffect)((function(){console.log("Map ",e," Facilities ",a),e.current&&a&&e.current.on("load",(function(){e.current.loadImage("/marker.png",(function(n,r){if(n)throw n;e.current.addImage("marker",r),e.current.addLayer({id:"facilities",type:"symbol",source:{type:"geojson",data:a},layout:{"icon-image":"marker","icon-size":.4,"text-field":["get","facname"],"text-font":["Open Sans Semibold","Arial Unicode MS Bold"],"text-offset":[0,.6],"text-size":10,"text-anchor":"top",visibility:t?"visible":"none"}})}))}))}),[e,a]),Object(n.useEffect)((function(){e.current&&e.current.isStyleLoaded()&&e.current.setLayoutProperty("facilities","visibility",t?"visible":"none")}),[e,t]),a}function A(){var e=Object(n.useRef)(null),t=Object(n.useState)("cd"),a=Object(u.a)(t,2),l=a[0],c=a[1],i=Object(n.useState)(null),o=Object(u.a)(i,2),m=o[0],d=o[1],f=Object(n.useState)([]),y=Object(u.a)(f,2),h=(y[0],y[1]),b=Object(n.useState)(!0),E=Object(u.a)(b,2),C=E[0],v=E[1];Object(n.useEffect)((function(){j.a.parse("/hard_to_count_NY.csv",{download:!0,header:!0,complete:function(e){h(e)}})}),[]);var S=function(e,t){var a=t.lnglat,r=t.zoom,l=t.style,c=t.key;p.a.accessToken=c;var i=Object(n.useRef)(null);return Object(n.useEffect)((function(){i.current=new p.a.Map({container:e.current,style:l,center:a,zoom:r})}),[e]),i}(e,{lnglat:[-73.9920330193022,40.75078660435196],zoom:10,style:"mapbox://styles/mapbox/light-v10",key:"pk.eyJ1Ijoic3R1YXJ0LWx5bm4iLCJhIjoiM2Q4ODllNmRkZDQ4Yzc3NTBhN2UyNDE0MWY2OTRiZWIifQ.8OEKvgZBCCtDFUXkjt66Pw"}),A=(function(e,t,a){var r=a.url,l=a.paintFill,c=a.paintLine,i=(a.sourceLayer,a.onClick),o=Object(n.useRef)(null),s=Object(n.useRef)(null),u=Object(n.useRef)(null),m="".concat(t,"_source");Object(n.useEffect)((function(){e.current&&e.current.on("load",(function(){u.current=e.current.addSource(m,{type:"geojson",data:r}),l&&(o.current=e.current.addLayer({id:"".concat(t,"-fill"),type:"fill",source:m,paint:l},"waterway-label")),c&&(s.current=e.current.addLayer({id:"".concat(t,"-line"),type:"line",source:m,paint:c},"waterway-label")),e.current.on("click","".concat(t,"-fill"),(function(e){console.log(e.features[0]),i&&i(e.features[0])}))}))}),[e])}(S,"HTC",Object(s.a)({},N.HTCLayer,{onClick:function(e){return d(e)}})),w(S,l)),L=k(S,C),B=function(e,t){return Object(n.useMemo)((function(){return e?t.features.filter((function(t){return t.properties.GEOID==e})).map((function(e){return e.properties})):[]}),[e,t])}(m?m.properties.GEOID:null,L);return r.a.createElement("div",{className:"main-page"},r.a.createElement("div",{className:"map",ref:e}),r.a.createElement("div",{className:"details"},r.a.createElement(O,{facilities:B,feature:m})," "),r.a.createElement(g,{boundaries:A,selectedBoundary:l,onSelectBoundary:c,showFacilities:C,onShowFacilitiesChange:v}))}a(81);var L=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(i.a,{basename:"/NYCCensusCountMap"},r.a.createElement(o.a,{path:"/",component:A})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(L,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[51,1,2]]]);
//# sourceMappingURL=main.1ade20a9.chunk.js.map