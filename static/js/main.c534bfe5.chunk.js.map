{"version":3,"sources":["components/ContactTypeLegend.js","components/RangeLegend.js","components/BoundarySelector.js","components/HelpTab.js","components/Legend.js","colors.js","components/PieCard.js","components/AssetCategoryCard.js","components/DetailsSelector.js","components/Details.js","Layers.js","hooks/useFacilitiesLayer.js","hooks/useFacilities.js","pages/MainPage.js","hooks/useMap.js","hooks/useGeoJSONLayer.js","hooks/useBoundaryLayers.js","App.js","serviceWorker.js","index.js"],"names":["ContactTypeLegend","className","icon","faCircle","style","color","RangeLegend","name","min","max","colStart","colEnd","gradient","console","log","background","BoundarySelector","boundaries","selectedBoundary","onSelect","options","Object","entries","map","value","label","datasetName","onChange","a","placeholder","HelpTab","Legend","onSelectBoundary","showFacilities","onShowFacilitiesChange","onSelectMetric","metric","useState","tab","setTab","onClick","faLayerGroup","faList","faInfoCircle","faQuestionCircle","type","checked","e","target","colors","reverse","renderCustomizedLabel","cx","cy","midAngle","innerRadius","outerRadius","percent","radius","index","x","Math","cos","RADIAN","y","sin","fill","textAnchor","dominantBaseline","toFixed","PI","PieCard","data","title","colData","d","i","width","height","labelLine","entry","backgroundColor","AssetCategoryCard","assets","asset","facname","address","boro","city","zipcode","join","DetailsSelector","selected","isSelected","Details","feature","facilities","layer","onSelectFacility","selectedDetails","setSelectedDetails","featureName","tracts","cd","sd","cc","nat","Fragment","properties","GEOID","geoid","total_population","MRR2010","strategy_code","contactStrategy","detail","internet_no_access","internet_subscription","internet_no_subscription","makeInternetData","norm","english_english","english_asian","english_spanish","english_european","english_other","makeEnglishData","age_less_5","age_6_15","age_16_64","age_64_over","makeAgeData","race_white","race_total","race_black","race_asian","race_hispanic","race_other","makeDemographicData","foreign_born_native","foreign_born_foreign","makeForeignData","own_vs_rent_rent","own_vs_rent_owner","makeRenting","fillStyles","strategy","returnCount","HTCLayer","url","process","paintFill","paintLine","BoundaryLayers","id","polygons","labels","nameCol","nameAlt","useFacilitiesLayer","visible","setFacilities","useEffect","fetch","then","json","useFacilities","current","on","loadImage","error","image","addImage","addLayer","source","layout","visibility","loaded","setLayoutProperty","MainPage","mapDiv","useRef","setSelectedBoundary","selectedFeature","setSelectedFeature","setHardToCountStats","setShowFacilities","setMetric","Papa","parse","download","header","complete","results","mapDivRef","lnglat","zoom","key","mapboxgl","accessToken","Map","container","center","useMap","Layers","boundaryLayers","sourceLayer","selection","fillLayer","lineLayer","source_name","oldSelectionID","addSource","paint","features","setFeatureState","setPaintProperty","useGeoJSONLayer","selectedLayer","selectedVar","onSelectLayer","selectedGeomID","layers","setLayers","layerList","forEach","sourceName","layerDeets","sourceLabels","labelLayer","useBoundaryLayers","boundary","tractFacilities","censusTractID","useMemo","filter","facility","f","useCensusTractFacilities","ref","App","basename","path","component","Boolean","window","location","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.c534bfe5.chunk.js","sourcesContent":["import React from 'react';\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome';\nimport {faCircle} from '@fortawesome/free-solid-svg-icons';\n\nexport default function ContactTypeLegend() {\n  return (\n    <section className=\"contact-type\">\n      <ul>\n        <li className=\"category-entry\">\n          <FontAwesomeIcon icon={faCircle} style={{color: '#C2A5CF'}} />{' '}\n          Internet First, English\n        </li>\n        <li className=\"category-entry\">\n          <FontAwesomeIcon icon={faCircle} style={{color: '#9970AB'}} />{' '}\n          Internet First, Bilingual\n        </li>\n        <li className=\"category-entry\">\n          <FontAwesomeIcon icon={faCircle} style={{color: '#A6DBA0'}} />{' '}\n          Internet Choice, English\n        </li>\n        <li className=\"category-entry\">\n          <FontAwesomeIcon icon={faCircle} style={{color: '#5AAE61'}} />{' '}\n          Internet Choice, Bilingual\n        </li>\n      </ul>\n    </section>\n  );\n}\n","import React from 'react';\n\nexport default function RangeLegend({name, min, max, colStart, colEnd}) {\n  const gradient = `linear-gradient(90deg, ${colStart} 0%, ${colEnd} 100%)`;\n\n  console.log('gradient is ', gradient);\n  return (\n    <div className=\"range-legend\">\n      <div\n        className=\"range-legend-bar\"\n        style={{\n          background: gradient,\n        }}\n      />\n      <div className=\"range-legend-labels\">\n        <p>{min}</p> <p>{max}</p>\n      </div>\n    </div>\n  );\n}\n","import React from 'react';\nimport Dropdown from 'react-dropdown';\nimport 'react-dropdown/style.css';\n\nexport default function BoundarySelector({\n  boundaries,\n  selectedBoundary,\n  onSelect,\n}) {\n  const options = Object.entries(boundaries).map(([id, layer]) => ({\n    value: id,\n    label: layer.datasetName,\n  }));\n  return (\n    <section className=\"boundary-selector\">\n      <h3>Boundaries</h3>\n\n      {boundaries && (\n        <Dropdown\n          options={[{value: 'tracts', label: 'Census Tracts'}, ...options]}\n          onChange={a => onSelect(a.value)}\n          value={selectedBoundary}\n          placeholder=\"Select a boundary\"\n        />\n      )}\n    </section>\n  );\n}\n","import React from 'react';\n\nexport default function HelpTab() {\n  return (\n    <div className=\"help-tab\">\n      <section>\n        <h2>Help</h2>\n        <h3>About</h3>\n        <p>\n          Bacon ipsum dolor amet ground round pancetta doner bresaola\n          frankfurter sirloin ham pork chop fatback chislic flank tri-tip\n          turducken. Frankfurter shankle turkey, flank pancetta andouille tongue\n          pork belly ball tip. Rump leberkas short ribs jowl frankfurter\n          porchetta t-bone flank meatloaf sausage pork. Pastrami shankle\n          bresaola, venison tenderloin cupim tri-tip turkey short ribs biltong\n          beef ribs andouille jerky kevin. Shankle chicken venison sausage\n          alcatra kielbasa chuck ground round chislic turducken pork loin.\n        </p>\n      </section>\n      <section>\n        <h3>How to read this map</h3>\n        <p>\n          Bacon ipsum dolor amet ribeye strip steak porchetta doner, sirloin\n          biltong t-bone ground round. Boudin kevin meatloaf ham. Flank kielbasa\n          hamburger corned beef. Capicola kevin short ribs, jerky venison\n          meatball flank sausage meatloaf.\n        </p>\n      </section>\n    </div>\n  );\n}\n","import React, {useState} from 'react';\nimport ContactTypeLegend from './ContactTypeLegend';\nimport RangeLegend from './RangeLegend';\nimport BoundarySelector from './BoundarySelector';\nimport HelpTab from './HelpTab';\n\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome';\nimport {\n  faInfoCircle,\n  faLayerGroup,\n  faQuestionCircle,\n  faList,\n} from '@fortawesome/free-solid-svg-icons';\n\nimport Dropdown from 'react-dropdown';\nimport 'react-dropdown/style.css';\n\nexport default function Legend({\n  selectedBoundary,\n  boundaries,\n  onSelectBoundary,\n  showFacilities,\n  onShowFacilitiesChange,\n  onSelectMetric,\n  metric,\n}) {\n  const [tab, setTab] = useState('layers');\n  console.log('Tab is ', tab);\n  return (\n    <div className=\"Legend overlay\">\n      <div className=\"tabs\">\n        <div\n          className={tab === 'layers' ? 'selected' : ''}\n          onClick={() => setTab('layers')}>\n          <FontAwesomeIcon icon={faLayerGroup} />\n        </div>\n        <div\n          className={tab === 'legend' ? 'selected' : ''}\n          onClick={() => setTab('legend')}>\n          <FontAwesomeIcon icon={faList} />\n        </div>\n        <div\n          className={tab === 'info' ? 'selected' : ''}\n          onClick={() => setTab('info')}>\n          <FontAwesomeIcon icon={faInfoCircle} />\n        </div>\n        <div\n          className={tab === 'questions' ? 'selected' : ''}\n          onClick={() => setTab('questions')}>\n          <FontAwesomeIcon icon={faQuestionCircle} />\n        </div>\n      </div>\n      <div className=\"content\">\n        {tab === 'layers' && (\n          <section className=\"thematic-layer\">\n            <h3>Metric</h3>\n            <Dropdown\n              options={[\n                {value: 'strategy', label: 'Mail Strategy'},\n                {value: 'returnCount', label: '2020 Mail Return Rate'},\n              ]}\n              onChange={a => onSelectMetric(a.value)}\n              value={metric}\n              placeholder=\"Select a metric\"\n            />\n            {metric == 'strategy' ? (\n              <ContactTypeLegend />\n            ) : (\n              <RangeLegend\n                name=\"2020 Mail Return %\"\n                min={0}\n                max={100}\n                colStart=\"#309dae\"\n                colEnd=\"#ebf7f9\"\n              />\n            )}\n            <BoundarySelector\n              selectedBoundary={selectedBoundary}\n              onSelect={onSelectBoundary}\n              boundaries={boundaries}\n            />\n            <div className=\"facilitesToggle\">\n              <p>\n                Show Facilities{' '}\n                <input\n                  type=\"checkbox\"\n                  checked={showFacilities}\n                  onChange={e => onShowFacilitiesChange(e.target.checked)}\n                />\n              </p>\n            </div>\n          </section>\n        )}\n        {tab === 'questions' && <HelpTab />}\n      </div>\n    </div>\n  );\n}\n","export const colors = [\n  '#000000',\n  '#cf0621',\n  '#8f1158',\n  '#b93f22',\n  '#faaf12',\n].reverse();\n","import React from 'react';\nimport {colors} from '../colors';\nimport {PieChart, Pie, Sector, Cell} from 'recharts';\n\nconst renderCustomizedLabel = ({\n  cx,\n  cy,\n  midAngle,\n  innerRadius,\n  outerRadius,\n  percent,\n  index,\n}) => {\n  const radius = innerRadius + (outerRadius - innerRadius) * 0.5;\n  const x = cx + radius * Math.cos(-midAngle * RADIAN);\n  const y = cy + radius * Math.sin(-midAngle * RADIAN);\n  if (percent < 4 / 100) {\n    return '';\n  }\n  return (\n    <text\n      x={x}\n      y={y}\n      fill=\"white\"\n      textAnchor={x > cx ? 'start' : 'end'}\n      dominantBaseline=\"central\">\n      {`${(percent * 100).toFixed(0)}%`}\n    </text>\n  );\n};\n\nconst RADIAN = Math.PI / 180;\nexport default function PieCard({data, title}) {\n  const colData = data.map((d, i) => ({...d, color: colors[i % 5]}));\n  return (\n    <div className=\"pie-card\">\n      <h2>{title}</h2>\n      <div className=\"pie-card-content\">\n        <PieChart width={140} height={140} data={colData}>\n          <Pie\n            data={colData}\n            cx={60}\n            cy={70}\n            labelLine={false}\n            label={renderCustomizedLabel}\n            outerRadius={60}\n            fill=\"#8884d8\">\n            {colData.map((entry, index) => (\n              <Cell fill={entry.color} />\n            ))}\n          </Pie>\n        </PieChart>\n        <ul className=\"labels\">\n          {colData.map((entry, index) => (\n            <li className=\"label\">\n              <span className=\"bar\" style={{backgroundColor: colors[index]}} />\n              <span className=\"label-text\">{entry.name}</span>\n            </li>\n          ))}\n        </ul>\n      </div>\n    </div>\n  );\n}\n","import React from 'react';\n\nexport default function AssetCategoryCard({assets, title}) {\n  console.log('assets', assets);\n  return (\n    <div className=\"asset-card\">\n      <h2>{title}</h2>\n      <ul>\n        {assets.map(asset => (\n          <li className=\"asset\">\n            <h3>{asset.facname}</h3>\n            <p>\n              {[asset.address, asset.boro, asset.city, asset.zipcode].join(',')}\n            </p>\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n}\n","import React from 'react';\n\nexport default function DetailsSelector({selected, onSelect}) {\n  const isSelected = name => (name === selected ? 'selected' : '');\n  return (\n    <div className=\"details-selector\">\n      <ul>\n        <li\n          onClick={() => onSelect('barriers')}\n          className={isSelected('barriers')}>\n          Barriers\n        </li>\n        <li\n          onClick={() => onSelect('demographics')}\n          className={isSelected('demographics')}>\n          Demographics\n        </li>\n        <li\n          onClick={() => onSelect('census2020')}\n          className={isSelected('census2020')}>\n          Census 2020 info\n        </li>\n        <li onClick={() => onSelect('assets')} className={isSelected('assets')}>\n          Assets\n        </li>\n      </ul>\n    </div>\n  );\n}\n","import React, {useState} from 'react';\nimport {RadialChart} from 'react-vis';\nimport FacilityCard from './FacilityCard';\nimport SimpleBarChart from './SimpleBarChart';\nimport PieCard from './PieCard';\nimport AssetCategoryCard from './AssetCategoryCard';\nimport DetailsSelector from './DetailsSelector';\n\nexport default function Details({\n  feature,\n  facilities,\n  onSelectFacility,\n  layer,\n}) {\n  const [showFacilities, setShowFacilities] = useState(false);\n\n  const [selectedDetails, setSelectedDetails] = useState('barriers');\n\n  const makeRenting = feature => {\n    const properties = feature.properties;\n    return [\n      {name: 'Reting', value: properties.own_vs_rent_rent},\n      {name: 'Owned', value: properties.own_vs_rent_owner},\n    ];\n  };\n\n  const featureNames = {\n    tracts: 'Census Tract',\n    cd: 'Community District',\n    sd: 'School District',\n    cc: 'City Council District',\n    nat: 'Neighborhood Tablulation Area',\n  };\n  const featureName = featureNames[layer];\n\n  console.log('layer:  ', layer, ' feature name  ', featureName);\n\n  const makeAgeData = feature => {\n    const properties = feature.properties;\n    const data = [\n      {\n        name: '5 years or younger',\n        value: properties.age_less_5,\n      },\n      {\n        name: '6 yrs - 15 yrs',\n        value: properties.age_6_15,\n      },\n      {\n        name: '16 yrs - 64 yrs',\n        value: properties.age_16_64,\n      },\n      {\n        name: '65 yrs or older',\n        value: properties.age_64_over,\n      },\n    ];\n    return data;\n  };\n  const makeForeignData = feature => {\n    const properties = feature.properties;\n    return [\n      {name: 'Native Born', value: properties.foreign_born_native},\n      {name: 'Foreign Born', value: properties.foreign_born_foreign},\n    ];\n  };\n  const makeEnglishData = feature => {\n    const properties = feature.properties;\n\n    return [\n      {name: 'English', value: properties.english_english},\n      {name: 'Asian Languages', value: properties.english_asian},\n      {name: 'Spanish', value: properties.english_spanish},\n      {name: 'European Languages', value: properties.english_european},\n      {name: 'Other', value: properties.english_other},\n    ];\n  };\n  const makeInternetData = feature => {\n    const properties = feature.properties;\n    const data = [\n      {name: 'No Internet', value: properties.internet_no_access},\n      {\n        name: 'Full Subscription',\n        value: properties.internet_subscription,\n      },\n      {\n        name: 'Limited Subscription',\n        value: properties.internet_no_subscription,\n      },\n    ];\n    console.log(properties);\n    return data;\n  };\n  const contactStrategy = feature => {\n    switch (feature.strategy_code) {\n      case 0:\n        return 'Internet First, English';\n      case 1:\n        return 'Internet First, Bilingual';\n      case 2:\n        return 'Internet Choice, English';\n      case 3:\n        return 'Internet Choice, Bilingual';\n    }\n  };\n  const makeDemographicData = feature => {\n    return [\n      {\n        name: 'white',\n        value: feature.properties.race_white / feature.properties.race_total,\n      },\n      {\n        name: 'black',\n        value: feature.properties.race_black / feature.properties.race_total,\n      },\n      {\n        name: 'asian',\n        value: feature.properties.race_asian / feature.properties.race_total,\n      },\n      {\n        name: 'latinx',\n        value: feature.properties.race_hispanic / feature.properties.race_total,\n      },\n      {\n        name: 'other',\n        value: feature.properties.race_other / feature.properties.race_total,\n      },\n    ];\n  };\n\n  const makeLEP = feature => {\n    const cols = [\n      'LEPHHs',\n      'LEPspanHHs',\n      'LEPindoeurHHs',\n      'LEPapacHHs',\n      'LEPotherHHs',\n    ];\n    const data = cols.map(col => ({\n      value: feature.properties[col],\n      title: col,\n    }));\n    return data;\n  };\n\n  return (\n    <div className=\"feature\">\n      {feature ? (\n        <React.Fragment>\n          <div className=\"overview\">\n            <h2>\n              {featureName}:{' '}\n              {layer === 'tracts'\n                ? feature.properties.GEOID\n                : feature.properties.geoid}\n            </h2>\n            <p>\n              Population:{' '}\n              <span style={{color: 'red'}}>\n                {feature.properties.total_population}\n              </span>\n            </p>\n            <p>\n              Mail return rate 2010:{' '}\n              <span style={{color: 'red'}}>{feature.properties.MRR2010}%</span>\n            </p>\n            <p>\n              Inital Contact Strategy:\n              <span style={{color: 'red'}}>\n                {contactStrategy(feature.properties)}\n              </span>\n            </p>\n          </div>\n          <div className=\"selector-cards\">\n            <DetailsSelector\n              selected={selectedDetails}\n              onSelect={detail => setSelectedDetails(detail)}\n            />\n            <div className=\"cards\">\n              {selectedDetails == 'barriers' && (\n                <>\n                  <div className=\"card internet\">\n                    <PieCard\n                      title=\"Internet Access\"\n                      data={makeInternetData(feature)}\n                      norm={true}\n                      style={{width: '500px'}}\n                    />\n                  </div>\n                  <div className=\"card english_proficency\">\n                    <PieCard\n                      title=\"English Proficency\"\n                      data={makeEnglishData(feature)}\n                      norm={true}\n                    />\n                  </div>\n                  <div className=\"card age\">\n                    <PieCard\n                      title=\"Age\"\n                      data={makeAgeData(feature)}\n                      norm={true}\n                    />\n                  </div>\n                </>\n              )}\n              {selectedDetails === 'demographics' && (\n                <>\n                  <div className=\"card demographics\">\n                    <PieCard\n                      title=\"Demographics\"\n                      data={makeDemographicData(feature)}\n                    />\n                  </div>\n                  <div className=\"card foreign\">\n                    <PieCard\n                      title=\"Foreign Born\"\n                      data={makeForeignData(feature)}\n                    />\n                  </div>\n                  <div className=\"card housing\">\n                    <PieCard title=\"Renting\" data={makeRenting(feature)} />\n                  </div>\n                </>\n              )}\n              {selectedDetails === 'assets' && (\n                <>\n                  <AssetCategoryCard title={'Medical'} assets={facilities} />\n                </>\n              )}\n            </div>\n          </div>\n        </React.Fragment>\n      ) : (\n        <div className=\"placeholder\">\n          <h2>Click {featureName} for details</h2>\n        </div>\n      )}\n    </div>\n  );\n}\n","export const fillStyles = {\n  strategy: [\n    'match',\n    ['get', 'strategy_code'],\n    0,\n    '#C2A5CF',\n    1,\n    '#9970AB',\n    2,\n    '#A6DBA0',\n    3,\n    '#5AAE61',\n    'grey',\n  ],\n  returnCount: [\n    'interpolate',\n    ['linear'],\n    ['get', 'MRR2010'],\n    0,\n    '#309dae',\n    100,\n    '#ebf7f9',\n  ],\n};\n\nexport default {\n  HTCLayer: {\n    //url: `${process.env.PUBLIC_URL}/CensusTractsAllVariables.geojson`,\n    url: `${process.env.PUBLIC_URL}/census_tracts.geojson`,\n    paintFill: {\n      'fill-color': 'grey',\n      'fill-opacity': 0.7,\n    },\n    paintLine: {\n      'line-color': [\n        'case',\n        ['boolean', ['coalesce', ['feature-state', 'selected'], false], true],\n        'red',\n        'white',\n      ],\n      'line-width': [\n        'case',\n        ['boolean', ['coalesce', ['feature-state', 'selected'], false], true],\n        3,\n        1,\n      ],\n    },\n  },\n};\n\nexport function BoundaryLayers() {\n  const layer_list = [\n    {\n      id: 'cd',\n      datasetName: 'Community Districts',\n      polygons: 'community_districts_vars.geojson',\n      labels: 'communty_district_labels.geojson',\n      url:\n        'http://data.cityofnewyork.us/api/geospatial/yfnk-k7r4?method=export&format=Shapefile',\n      nameCol: 'boro_cd',\n      nameAlt: null,\n    },\n    {\n      id: 'sd',\n      datasetName: 'School Districts',\n      polygons: 'school_districts_with_vars.geojson',\n      labels: 'school_district_labels.geojson',\n      url:\n        'http://data.cityofnewyork.us/api/geospatial/r8nu-ymqj?method=export&format=Shapefile',\n      nameCol: 'district',\n      nameAlt: 'districtco',\n    },\n    {\n      id: 'cc',\n      datasetName: 'City Council Districts',\n      polygons: 'city_council_district_with_vars.geojson',\n      labels: 'city_council_district_labels.geojson',\n      url:\n        'http://data.cityofnewyork.us/api/geospatial/yusd-j4xi?method=export&format=Shapefile',\n      nameCol: 'coun_dist',\n      nameAlt: null,\n    },\n    {\n      id: 'nta',\n      datasetName: 'Neighborhood Tabulation Area',\n      polygons: 'ntas_with_vars.geojson',\n      labels: 'nta_labels.geojson',\n      url:\n        'http://data.cityofnewyork.us/api/geospatial/cpf4-rkhq?method=export&format=Shapefile',\n      nameCol: 'ntaname',\n      nameAlt: 'ntacode',\n    },\n    /*{\n      id: 'pp',\n      datasetName: 'Police Precincts',\n      url:\n        'http://data.cityofnewyork.us/api/geospatial/78dh-3ptz?method=export&format=Shapefile',\n      nameCol: 'precinct',\n      nameAlt: null,\n    },\n    {\n      id: 'hc',\n      datasetName: 'Health Center Districts',\n      url:\n        'http://data.cityofnewyork.us/api/geospatial/b55q-34ps?method=export&format=Shapefile',\n      nameCol: 'hcent_dist',\n      nameAlt: null,\n    },\n    {\n      id: 'nycongress',\n      datasetName: 'Congressional Districts',\n      url:\n        'http://data.cityofnewyork.us/api/geospatial/qd3c-zuu7?method=export&format=Shapefile',\n      nameCol: 'cong_dist',\n      nameAlt: null,\n    },\n    {\n      id: 'sa',\n      datasetName: 'State Assembly Districts',\n      url:\n        'http://data.cityofnewyork.us/api/geospatial/pf5b-73bw?method=export&format=Shapefile',\n      nameCol: 'assem_dist',\n      nameAlt: null,\n    },\n    {\n      id: 'ss',\n      datasetName: 'State Senate Districts',\n      url:\n        'http://data.cityofnewyork.us/api/geospatial/h4i2-acfi?method=export&format=Shapefile',\n      nameCol: 'st_sen_dis',\n      nameAlt: null,\n    },\n    {\n      id: 'bid',\n      datasetName: 'Business Improvement District',\n      url:\n        'http://data.cityofnewyork.us/api/geospatial/ejxk-d93y?method=export&format=Shapefile',\n      nameCol: 'bid',\n      nameAlt: null,\n    },\n    /*{\n      id: 'zipcode',\n      datasetName: 'Zip Code',\n      url: 'http://data.cityofnewyork.us/download/i8iw-xf4u/application%2Fzip',\n      nameCol: 'ZIPCODE',\n      nameAlt: null,\n},*/\n  ];\n\n  return layer_list.map(layer => ({\n    ...layer,\n    paintLine: {\n      'line-color': 'black',\n    },\n  }));\n}\n","import React, {useEffect} from 'react';\nimport useFacilities from './useFacilities';\n\nexport default function useFacilitiesLayer(map, visible) {\n  const facilities = useFacilities();\n\n  useEffect(() => {\n    console.log('Map ', map, ' Facilities ', facilities);\n    if (map.current && facilities) {\n      map.current.on('load', () => {\n        map.current.loadImage(\n          `${process.env.PUBLIC_URL}/marker.png`,\n          (error, image) => {\n            if (error) throw error;\n            map.current.addImage('marker', image);\n            map.current.addLayer({\n              id: 'facilities',\n              type: 'symbol',\n              source: {\n                type: 'geojson',\n                data: facilities,\n              },\n              layout: {\n                'icon-image': 'marker',\n                'icon-size': 0.4,\n                'text-field': ['get', 'facname'],\n                'text-font': ['Open Sans Semibold', 'Arial Unicode MS Bold'],\n                'text-offset': [0, 0.6],\n                'text-size': 10,\n                'text-anchor': 'top',\n                visibility: false, // visible ? 'visible' : 'none',\n              },\n            });\n          },\n        );\n      });\n    }\n  }, [map, facilities]);\n\n  useEffect(() => {\n    if (map.current && map.current.loaded()) {\n      map.current.setLayoutProperty(\n        `facilities`,\n        'visibility',\n        visible ? 'visible' : 'none',\n      );\n    }\n  }, [map, visible]);\n\n  return facilities;\n}\n","import React, {useEffect, useState, useMemo} from 'react';\n\nexport default function useFacilities() {\n  const [facilities, setFacilities] = useState(null);\n  useEffect(() => {\n    fetch(`${process.env.PUBLIC_URL}/facilities.geojson`)\n      .then(a => a.json())\n      .then(a => setFacilities(a));\n  }, []);\n  return facilities;\n}\n\nexport function useCensusTractFacilities(censusTractID, facilities) {\n  return useMemo(() => {\n    return censusTractID\n      ? facilities.features\n          .filter(facility => facility.properties.GEOID == censusTractID)\n          .map(f => f.properties)\n      : [];\n  }, [censusTractID, facilities]);\n}\n","import React, {useRef, useState, useEffect} from 'react';\nimport {useMap} from '../hooks/useMap';\nimport Legend from '../components/Legend';\nimport Details from '../components/Details';\nimport Papa from 'papaparse';\nimport {useMVTLayer} from '../hooks/useMVTLayer';\nimport {useGeoJSONLayer} from '../hooks/useGeoJSONLayer';\nimport useBoundaryLayers from '../hooks/useBoundaryLayers';\nimport useFacilitiesLayer from '../hooks/useFacilitiesLayer';\nimport {useCensusTractFacilities} from '../hooks/useFacilities';\nimport Layers, {fillStyles} from '../Layers';\n\nexport default function MainPage() {\n  const mapDiv = useRef(null);\n  const [selectedBoundary, setSelectedBoundary] = useState('cd');\n  const [selectedFeature, setSelectedFeature] = useState(null);\n  const [hardToCountStats, setHardToCountStats] = useState([]);\n  const [showFacilities, setShowFacilities] = useState(true);\n  const [metric, setMetric] = useState('strategy');\n\n  useEffect(() => {\n    Papa.parse('/hard_to_count_NY.csv', {\n      download: true,\n      header: true,\n      complete: function(results) {\n        setHardToCountStats(results);\n      },\n    });\n  }, []);\n\n  const map = useMap(mapDiv, {\n    lnglat: [-73.9920330193022, 40.75078660435196],\n    zoom: 10,\n    style: 'mapbox://styles/mapbox/light-v10',\n    key:\n      'pk.eyJ1Ijoic3R1YXJ0LWx5bm4iLCJhIjoiM2Q4ODllNmRkZDQ4Yzc3NTBhN2UyNDE0MWY2OTRiZWIifQ.8OEKvgZBCCtDFUXkjt66Pw',\n  });\n\n  useEffect(() => {\n    setSelectedFeature(null);\n  }, [selectedBoundary]);\n  //  const stategyLayer = useMVTLayer(map, Layers.censusStrategyLayer);\n\n  //  const HTCLayer = useMVTLayer(map, Layers.HTCLayer);\n  const style = {\n    ...Layers.HTCLayer,\n    ...{paintFill: {'fill-color': fillStyles[metric], 'fill-opacity': 0.7}},\n  };\n\n  const GeojsonLayer = useGeoJSONLayer(map, 'HTC', {\n    ...style,\n    onClick: feature => setSelectedFeature(feature),\n    selection: selectedFeature,\n    visible: selectedBoundary === 'tracts',\n  });\n\n  // BoundaryLayers().forEach(layer => {\n  const boundaryLayers = useBoundaryLayers(\n    map,\n    selectedBoundary,\n    null,\n    null,\n    null,\n    boundary => setSelectedFeature(boundary),\n  );\n\n  const facilities = useFacilitiesLayer(map, showFacilities);\n  const tractFacilities = useCensusTractFacilities(\n    selectedFeature ? selectedFeature.properties.GEOID : null,\n    facilities,\n  );\n  return (\n    <div className=\"main-page\">\n      <div className=\"map\" ref={mapDiv} />\n      <div className=\"info overlay\">\n        <h2>NYC CENSUS 2020 INTERACTIVE MAP</h2>\n        <h3>Created by Stuart Lynn: Hosted/designed Hester Street</h3>\n        <p>\n          This interactive map serves the purpose for any organization to learn\n          more about the people they serve. This map is fully interactive and\n          will remain avaliable after the Census effort\n        </p>\n      </div>\n      <div className=\"details overlay\">\n        <Details\n          facilities={tractFacilities}\n          feature={selectedFeature}\n          layer={selectedBoundary}\n        />{' '}\n      </div>\n      <Legend\n        boundaries={boundaryLayers}\n        selectedBoundary={selectedBoundary}\n        onSelectBoundary={setSelectedBoundary}\n        showFacilities={showFacilities}\n        onShowFacilitiesChange={setShowFacilities}\n        metric={metric}\n        onSelectMetric={setMetric}\n      />\n    </div>\n  );\n}\n","import {useState, useRef, useEffect, useCallback} from 'react';\nimport mapboxgl from 'mapbox-gl';\nimport 'mapbox-gl/dist/mapbox-gl.css';\nimport style from '../map_style';\n\nexport function useMap(mapDivRef, {lnglat, zoom, key}) {\n  mapboxgl.accessToken = key;\n  const map = useRef(null);\n  useEffect(() => {\n    map.current = new mapboxgl.Map({\n      container: mapDivRef.current, // container id\n      style: style, // stylesheet location\n      center: lnglat, // starting position [lng, lat]\n      zoom: zoom, // starting zoom\n    });\n  }, [mapDivRef]);\n\n  return map;\n}\n","import {useEffect, useRef} from 'react';\n\nexport function useGeoJSONLayer(\n  map,\n  name,\n  {url, paintFill, paintLine, sourceLayer, onClick, selection, visible},\n) {\n  const fillLayer = useRef(null);\n  const lineLayer = useRef(null);\n  const source = useRef(null);\n  const source_name = `${name}_source`;\n  const oldSelectionID = useRef(null);\n  useEffect(() => {\n    if (map.current) {\n      map.current.on('load', () => {\n        source.current = map.current.addSource(source_name, {\n          type: 'geojson',\n          data: url,\n        });\n\n        if (paintFill) {\n          fillLayer.current = map.current.addLayer({\n            id: `${name}-fill`,\n            type: 'fill',\n            source: source_name,\n            paint: paintFill,\n            layout: {\n              visibility: visible ? 'visible' : 'none',\n            },\n          });\n        }\n        if (paintLine) {\n          lineLayer.current = map.current.addLayer({\n            id: `${name}-line`,\n            type: 'line',\n            source: source_name,\n            paint: paintLine,\n            layout: {\n              visibility: visible ? 'visible' : 'none',\n            },\n          });\n        }\n        map.current.on('click', `${name}-fill`, e => {\n          console.log(e.features[0]);\n          if (onClick) {\n            onClick(e.features[0]);\n          }\n        });\n      });\n    }\n  }, [map]);\n\n  useEffect(() => {\n    if (map.current && selection) {\n      if (oldSelectionID.current) {\n        map.current.setFeatureState(\n          {source: source_name, id: oldSelectionID.current},\n          {selected: false},\n        );\n      }\n\n      map.current.setFeatureState(\n        {source: source_name, id: selection.id},\n        {selected: true},\n      );\n      oldSelectionID.current = selection.id;\n    }\n  }, [selection]);\n\n  useEffect(() => {\n    if (map.current && map.current.loaded()) {\n      map.current.setLayoutProperty(\n        `${name}-fill`,\n        'visibility',\n        visible ? 'visible' : 'none',\n      );\n      map.current.setLayoutProperty(\n        `${name}-line`,\n        'visibility',\n        visible ? 'visible' : 'none',\n      );\n    }\n  }, [map, visible]);\n\n  useEffect(() => {\n    if (map.current && map.current.loaded()) {\n      console.log(\n        'setting fill color to be ',\n        paintFill['fill-color'],\n        paintFill,\n      );\n      map.current.setPaintProperty(\n        `${name}-fill`,\n        'fill-color',\n        paintFill['fill-color'],\n      );\n    }\n  }, [paintFill]);\n  return {fillLayer, source};\n}\n","import React, {useEffect, useState, useRef} from 'react';\nimport {BoundaryLayers} from '../Layers';\n\nexport default function useBoundaryLayers(\n  map,\n  selectedLayer,\n  selectedVar,\n  onSelectLayer,\n  selectedGeomID,\n  onClick,\n) {\n  const [layers, setLayers] = useState({});\n\n  useEffect(() => {\n    if (map.current) {\n      let layerList = {};\n      map.current.on('load', () => {\n        const boundaryLayers = BoundaryLayers();\n        boundaryLayers.forEach(layer => {\n          const sourceName = `${layer.id}_source`;\n\n          let layerDeets = {...layer};\n          layerDeets.source = map.current.addSource(sourceName, {\n            type: 'geojson',\n            data: `${process.env.PUBLIC_URL}/boundaries/${layer.polygons}`,\n          });\n\n          layerDeets.sourceLabels = map.current.addSource(\n            sourceName + '_labels',\n            {\n              type: 'geojson',\n              data: `${process.env.PUBLIC_URL}/boundaries/${layer.labels}`,\n            },\n          );\n\n          layerDeets.fillLayer = map.current.addLayer({\n            id: `${layer.id}-fill`,\n            type: 'fill',\n            source: sourceName,\n            paint: {\n              'fill-color': 'grey',\n              'fill-opacity': 0.7,\n            },\n            layout: {\n              visibility: selectedLayer == layer.id ? 'visible' : 'none',\n            },\n          });\n\n          if (layer.paintLine) {\n            layerDeets.lineLayer = map.current.addLayer({\n              id: `${layer.id}-line`,\n              type: 'line',\n              source: sourceName,\n              paint: layer.paintLine,\n              layout: {\n                visibility: selectedLayer == layer.id ? 'visible' : 'none',\n              },\n            });\n          }\n\n          layerDeets.labelLayer = map.current.addLayer({\n            id: `${layer.id}-labels`,\n            type: 'symbol',\n            source: sourceName + '_labels',\n            layout: {\n              visibility: selectedLayer == layer.id ? 'visible' : 'none',\n              'text-field': ['get', 'geoid'],\n              'text-font': ['Open Sans Semibold', 'Arial Unicode MS Bold'],\n              'text-offset': [0, 0.0],\n              'text-size': 15,\n              'text-anchor': 'top',\n            },\n          });\n          layerList[layer.id] = layerDeets;\n        });\n        setLayers(layerList);\n      });\n    }\n  }, [map]);\n\n  useEffect(() => {\n    if (map.current) {\n      Object.entries(layers).forEach(([id, layer]) => {\n        map.current.setLayoutProperty(\n          `${layer.id}-line`,\n          'visibility',\n          id == selectedLayer ? 'visible' : 'none',\n        );\n        map.current.setLayoutProperty(\n          `${layer.id}-labels`,\n          'visibility',\n          id == selectedLayer ? 'visible' : 'none',\n        );\n        map.current.setLayoutProperty(\n          `${layer.id}-fill`,\n          'visibility',\n          id == selectedLayer ? 'visible' : 'none',\n        );\n      });\n    }\n  }, [map, selectedLayer]);\n\n  useEffect(() => {\n    if (map.current) {\n      const boundaryLayers = BoundaryLayers();\n      boundaryLayers.forEach(layer => {\n        map.current.on('click', `${layer.id}-fill`, e => {\n          if (onClick) {\n            onClick(e.features[0], layer.id);\n          }\n        });\n      });\n    }\n  }, [map]);\n  return layers;\n}\n","import React from 'react';\nimport {BrowserRouter as Router, Route} from 'react-router-dom';\nimport MainPage from './pages/MainPage';\nimport './App.scss';\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <Router basename={process.env.PUBLIC_URL}>\n        <Route path=\"/\" component={MainPage} />\n      </Router>\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}