(this.webpackJsonpmap=this.webpackJsonpmap||[]).push([[0],{51:function(e,t,a){e.exports=a(84)},56:function(e,t,a){},81:function(e,t,a){},84:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),l=a(29),i=a.n(l),o=(a(56),a(46)),c=a(9),s=a(14),u=a(8),d=a(30),m=a.n(d);a(57);var p=a(16),f=a(17);function y(){return r.a.createElement("section",{className:"contact-type"},r.a.createElement("ul",null,r.a.createElement("li",{className:"category-entry"},r.a.createElement(p.a,{icon:f.a,style:{color:"#C2A5CF"}})," ","Internet First, English"),r.a.createElement("li",{className:"category-entry"},r.a.createElement(p.a,{icon:f.a,style:{color:"#9970AB"}})," ","Internet First, Bilingual"),r.a.createElement("li",{className:"category-entry"},r.a.createElement(p.a,{icon:f.a,style:{color:"#A6DBA0"}})," ","Internet Choice, English"),r.a.createElement("li",{className:"category-entry"},r.a.createElement(p.a,{icon:f.a,style:{color:"#5AAE61"}})," ","Internet Choice, Bilingual")))}var h=a(43),b=a.n(h);a(63);function g(e){var t=e.boundaries,a=e.selectedBoundary,n=e.onSelect;return r.a.createElement("section",{className:"boundary-selector"},r.a.createElement("h4",null,"Boundaries"),t&&r.a.createElement(b.a,{options:Object.entries(t).map((function(e){var t=Object(u.a)(e,2);return{value:t[0],label:t[1].datasetName}})),onChange:function(e){return n(e.value)},value:a,placeholder:"Select a boundary"}))}function E(e){var t=e.selectedBoundary,a=e.boundaries,n=e.onSelectBoundary;return r.a.createElement("div",{className:"Legend"},r.a.createElement("section",{className:"thematic-layer"},r.a.createElement(y,null),r.a.createElement(g,{selectedBoundary:t,onSelect:n,boundaries:a})))}var v=a(34);function C(e){var t=e.feature;console.log(t);return r.a.createElement("div",{className:"feature"},t?r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Census Tract: ",t.properties.ct2010),r.a.createElement("div",{className:"cards"},r.a.createElement("div",{className:"card basic"},r.a.createElement("h3",null,"Basic Info"),r.a.createElement("p",null,"Population ",t.properties.TotPopACS17),r.a.createElement("p",null,"Mail return rate 2010 :",t.properties.MRR2010,"%")),r.a.createElement("div",{className:"card demographics"},r.a.createElement("h3",null,"Demographics")),r.a.createElement("div",{className:"card english_proficency"},r.a.createElement("h3",null,"English Proficency"),r.a.createElement(v.a,{width:200,height:200,data:function(e){return["LEPHHs","LEPspanHHs","LEPindoeurHHs","LEPapacHHs","LEPotherHHs"].map((function(t){return{angle:e.properties[t],label:t}}))}(t),showLabels:!0,labelsRadiusMultiplier:1.1,labelsStyle:{fontSize:12},innerRadius:80,radius:100})),r.a.createElement("div",{className:"card internet"},r.a.createElement("h3",null,"Internet"),r.a.createElement(v.a,{width:200,height:200,data:function(e){var t=["NoInternet","Internet_NoSub","Internet","DialUpOnly","Broadband_Any","Cellular","CellularOnly","Broadband_CableFiberOpticDSL","Broadband_CableFiberOpticDSLOnly","Satellite","SatelliteOnly","OtherOnly"].map((function(t){return{angle:e.properties[t],label:t}}));return console.log(t),t}(t),showLabels:!0,labelsRadiusMultiplier:1.1,innerRadius:80,radius:100,labelsStyle:{fontSize:12}})))):r.a.createElement("h2",null,"Click to see details of feature"))}var j=a(45),N=a.n(j);var S={geojsonLayer:{url:"/CensusTractsAllVariables.geojson",paintFill:{"fill-color":["match",["get","strategy_code"],0,"#C2A5CF",1,"#9970AB",2,"#A6DBA0",3,"#5AAE61","grey"]},paintLine:{"line-color":"lightgrey"}},censusStrategyLayer:{url:"https://gis-server.data.census.gov/arcgis/rest/services/Hosted/Mail_Strategy_VectorTile/VectorTileServer/tile/{z}/{y}/{x}.pbf",sourceLayer:"Mail Strategy",paintFill:{"fill-color":["match",["get","_symbol"],0,"#C2A5CF",1,"#9970AB",2,"#A6DBA0",3,"#5AAE61","grey"]},paintLine:{"line-color":"lightgrey","line-width":.2}},HTCLayer:{url:"https://b.tiles.mapbox.com/v4/cunycur.9zkm964v/{z}/{x}/{y}.vector.pbf?access_token=pk.eyJ1IjoiY3VueWN1ciIsImEiOiJfQmNSMF9NIn0.uRgbcFeJbw2xyTUZY8gYeA",sourceLayer:"Tract2017wgs84_HTConly-c1gvdq",paintFill:{"fill-color":"red"},paintLine:{"line-color":"lightgrey","line-width":.2}}};function w(e,t){var a=Object(n.useState)({}),r=Object(u.a)(a,2),l=r[0],i=r[1];return Object(n.useEffect)((function(){if(e.current){var a={};e.current.on("load",(function(){console.log("adding boundary layers"),[{id:"cd",datasetName:"Community Districts",url:"http://data.cityofnewyork.us/api/geospatial/yfnk-k7r4?method=export&format=Shapefile",nameCol:"boro_cd",nameAlt:null},{id:"pp",datasetName:"Police Precincts",url:"http://data.cityofnewyork.us/api/geospatial/78dh-3ptz?method=export&format=Shapefile",nameCol:"precinct",nameAlt:null},{id:"sd",datasetName:"School Districts",url:"http://data.cityofnewyork.us/api/geospatial/r8nu-ymqj?method=export&format=Shapefile",nameCol:"district",nameAlt:"districtco"},{id:"hc",datasetName:"Health Center Districts",url:"http://data.cityofnewyork.us/api/geospatial/b55q-34ps?method=export&format=Shapefile",nameCol:"hcent_dist",nameAlt:null},{id:"cc",datasetName:"City Council Districts",url:"http://data.cityofnewyork.us/api/geospatial/yusd-j4xi?method=export&format=Shapefile",nameCol:"coun_dist",nameAlt:null},{id:"nycongress",datasetName:"Congressional Districts",url:"http://data.cityofnewyork.us/api/geospatial/qd3c-zuu7?method=export&format=Shapefile",nameCol:"cong_dist",nameAlt:null},{id:"sa",datasetName:"State Assembly Districts",url:"http://data.cityofnewyork.us/api/geospatial/pf5b-73bw?method=export&format=Shapefile",nameCol:"assem_dist",nameAlt:null},{id:"ss",datasetName:"State Senate Districts",url:"http://data.cityofnewyork.us/api/geospatial/h4i2-acfi?method=export&format=Shapefile",nameCol:"st_sen_dis",nameAlt:null},{id:"nta",datasetName:"Neighborhood Tabulation Area",url:"http://data.cityofnewyork.us/api/geospatial/cpf4-rkhq?method=export&format=Shapefile",nameCol:"ntaname",nameAlt:"ntacode"},{id:"bid",datasetName:"Business Improvement District",url:"http://data.cityofnewyork.us/api/geospatial/ejxk-d93y?method=export&format=Shapefile",nameCol:"bid",nameAlt:null}].map((function(e){return Object(s.a)({},e,{paintLine:{"line-color":"black"}})})).forEach((function(n){var r="".concat(n.id,"_source"),l=Object(s.a)({},n);console.log("adding source ",r),l.source=e.current.addSource(r,{type:"geojson",data:"/boundaries/".concat(n.id,".geojson")}),n.paintFill&&(l.fillLayer=e.current.addLayer({id:"".concat(n.id,"-fill"),type:"fill",source:r,paint:n.paintFill},"waterway-label")),n.paintLine&&(l.lineLayer=e.current.addLayer({id:"".concat(n.id,"-line"),type:"line",source:r,paint:n.paintLine,layout:{visibility:t==n.id?"visible":"none"}},"waterway-label")),a[n.id]=l})),i(a)}))}}),[e]),Object(n.useEffect)((function(){e.current&&Object.entries(l).forEach((function(a){var n=Object(u.a)(a,2),r=n[0],l=n[1];e.current.setLayoutProperty("".concat(l.id,"-line"),"visibility",r==t?"visible":"none")}))}),[e,t]),l}function O(){var e=Object(n.useRef)(null),t=Object(n.useState)("cd"),a=Object(u.a)(t,2),l=a[0],i=a[1],o=Object(n.useState)(null),c=Object(u.a)(o,2),d=c[0],p=c[1],f=Object(n.useState)([]),y=Object(u.a)(f,2),h=(y[0],y[1]);Object(n.useEffect)((function(){N.a.parse("/hard_to_count_NY.csv",{download:!0,header:!0,complete:function(e){h(e)}})}),[]);var b=function(e,t){var a=t.lnglat,r=t.zoom,l=t.style,i=t.key;m.a.accessToken=i;var o=Object(n.useRef)(null);return Object(n.useEffect)((function(){o.current=new m.a.Map({container:e.current,style:l,center:a,zoom:r})}),[e]),o}(e,{lnglat:[-73.9920330193022,40.75078660435196],zoom:10,style:"mapbox://styles/mapbox/light-v10",key:"pk.eyJ1Ijoic3R1YXJ0LWx5bm4iLCJhIjoiM2Q4ODllNmRkZDQ4Yzc3NTBhN2UyNDE0MWY2OTRiZWIifQ.8OEKvgZBCCtDFUXkjt66Pw"}),g=(function(e,t,a){var r=a.url,l=a.paintFill,i=a.paintLine,o=(a.sourceLayer,a.onClick),c=Object(n.useRef)(null),s=Object(n.useRef)(null),u=Object(n.useRef)(null),d="".concat(t,"_source");Object(n.useEffect)((function(){e.current&&e.current.on("load",(function(){u.current=e.current.addSource(d,{type:"geojson",data:r}),l&&(c.current=e.current.addLayer({id:"".concat(t,"-fill"),type:"fill",source:d,paint:l},"waterway-label")),i&&(s.current=e.current.addLayer({id:"".concat(t,"-line"),type:"line",source:d,paint:i},"waterway-label")),e.current.on("click","".concat(t,"-fill"),(function(e){console.log(e.features[0]),o&&o(e.features[0])}))}))}),[e])}(b,"HTC",Object(s.a)({},S.geojsonLayer,{onClick:function(e){return p(e)}})),w(b,l));Object(n.useEffect)((function(){fetch("/facilities.geojson").then((function(e){return e.json()})).then((function(e){return console.log("facilities ",e)}))}),[]);return r.a.createElement("div",{className:"main-page"},r.a.createElement("div",{className:"map",ref:e}),r.a.createElement("div",{className:"details"},r.a.createElement(C,{feature:d})," "),r.a.createElement(E,{boundaries:g,selectedBoundary:l,onSelectBoundary:i}))}a(81);var A=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(o.a,{basename:"/NYCCensusCountMap"},r.a.createElement(c.a,{path:"/",component:O})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(A,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[51,1,2]]]);
//# sourceMappingURL=main.2219fdff.chunk.js.map