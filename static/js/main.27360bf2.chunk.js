(this.webpackJsonpmap=this.webpackJsonpmap||[]).push([[0],{53:function(e,t,a){e.exports=a(86)},58:function(e,t,a){},82:function(e,t,a){},86:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),l=a(30),c=a.n(l),o=(a(58),a(48)),i=a(12),s=a(6),u=a(3),m=a(31),d=a.n(m);a(59);var p=a(8),f=a(9);function b(){return r.a.createElement("section",{className:"contact-type"},r.a.createElement("ul",null,r.a.createElement("li",{className:"category-entry"},r.a.createElement(p.a,{icon:f.a,style:{color:"#C2A5CF"}})," ","Internet First, English"),r.a.createElement("li",{className:"category-entry"},r.a.createElement(p.a,{icon:f.a,style:{color:"#9970AB"}})," ","Internet First, Bilingual"),r.a.createElement("li",{className:"category-entry"},r.a.createElement(p.a,{icon:f.a,style:{color:"#A6DBA0"}})," ","Internet Choice, English"),r.a.createElement("li",{className:"category-entry"},r.a.createElement(p.a,{icon:f.a,style:{color:"#5AAE61"}})," ","Internet Choice, Bilingual")))}function h(e){e.name;var t=e.min,a=e.max,n=e.colStart,l=e.colEnd,c="linear-gradient(90deg, ".concat(n," 0%, ").concat(l," 100%)");return console.log("gradient is ",c),r.a.createElement("div",{className:"range-legend"},r.a.createElement("div",{className:"range-legend-bar",style:{background:c}}),r.a.createElement("div",{className:"range-legend-labels"},r.a.createElement("p",null,t)," ",r.a.createElement("p",null,a)))}var y=a(21),E=a.n(y);a(38);function g(e){var t=e.boundaries,a=e.selectedBoundary,n=e.onSelect;return r.a.createElement("section",{className:"boundary-selector"},r.a.createElement("h3",null,"Boundaries"),t&&r.a.createElement(E.a,{options:Object.entries(t).map((function(e){var t=Object(u.a)(e,2);return{value:t[0],label:t[1].datasetName}})),onChange:function(e){return n(e.value)},value:a,placeholder:"Select a boundary"}))}function v(){return r.a.createElement("div",{className:"help-tab"},r.a.createElement("section",null,r.a.createElement("h2",null,"Help"),r.a.createElement("h3",null,"About"),r.a.createElement("p",null,"Bacon ipsum dolor amet ground round pancetta doner bresaola frankfurter sirloin ham pork chop fatback chislic flank tri-tip turducken. Frankfurter shankle turkey, flank pancetta andouille tongue pork belly ball tip. Rump leberkas short ribs jowl frankfurter porchetta t-bone flank meatloaf sausage pork. Pastrami shankle bresaola, venison tenderloin cupim tri-tip turkey short ribs biltong beef ribs andouille jerky kevin. Shankle chicken venison sausage alcatra kielbasa chuck ground round chislic turducken pork loin.")),r.a.createElement("section",null,r.a.createElement("h3",null,"How to read this map"),r.a.createElement("p",null,"Bacon ipsum dolor amet ribeye strip steak porchetta doner, sirloin biltong t-bone ground round. Boudin kevin meatloaf ham. Flank kielbasa hamburger corned beef. Capicola kevin short ribs, jerky venison meatball flank sausage meatloaf.")))}function C(e){var t=e.selectedBoundary,a=e.boundaries,l=e.onSelectBoundary,c=e.showFacilities,o=e.onShowFacilitiesChange,i=e.onSelectMetric,s=e.metric,m=Object(n.useState)("layers"),d=Object(u.a)(m,2),y=d[0],C=d[1];return console.log("Tab is ",y),r.a.createElement("div",{className:"Legend overlay"},r.a.createElement("div",{className:"tabs"},r.a.createElement("div",{className:"layers"===y?"selected":"",onClick:function(){return C("layers")}},r.a.createElement(p.a,{icon:f.c})),r.a.createElement("div",{className:"legend"===y?"selected":"",onClick:function(){return C("legend")}},r.a.createElement(p.a,{icon:f.d})),r.a.createElement("div",{className:"info"===y?"selected":"",onClick:function(){return C("info")}},r.a.createElement(p.a,{icon:f.b})),r.a.createElement("div",{className:"questions"===y?"selected":"",onClick:function(){return C("questions")}},r.a.createElement(p.a,{icon:f.e}))),r.a.createElement("div",{className:"content"},"layers"===y&&r.a.createElement("section",{className:"thematic-layer"},r.a.createElement("h3",null,"Metric"),r.a.createElement(E.a,{options:[{value:"strategy",label:"Mail Strategy"},{value:"returnCount",label:"2020 Mail Return Rate"}],onChange:function(e){return i(e.value)},value:s,placeholder:"Select a metric"}),"strategy"==s?r.a.createElement(b,null):r.a.createElement(h,{name:"2020 Mail Return %",min:0,max:100,colStart:"#309dae",colEnd:"#ebf7f9"}),r.a.createElement(g,{selectedBoundary:t,onSelect:l,boundaries:a}),r.a.createElement("div",{className:"facilitesToggle"},r.a.createElement("p",null,"Show Facilities"," ",r.a.createElement("input",{type:"checkbox",checked:c,onChange:function(e){return o(e.target.checked)}})))),"questions"===y&&r.a.createElement(v,null)))}a(85);a(35);var k=a(46),N=a.n(k),O=["#000000","#cf0621","#8f1158","#b93f22","#faaf12"].reverse();function S(e){var t=e.data,a=e.title,n=t.map((function(e,t){return Object(s.a)({},e,{color:O[t%5]})}));return r.a.createElement("div",{className:"pie-card"},r.a.createElement("h2",null,a),r.a.createElement("div",{className:"pie-card-content"},r.a.createElement(N.a,{style:{width:"100px",height:"100px"},viewBoxSize:[100,100],data:n}),r.a.createElement("ul",{className:"labels"},n.map((function(e,t){return r.a.createElement("li",{className:"label"},r.a.createElement("span",{className:"bar",style:{backgroundColor:O[t]}}),r.a.createElement("span",{className:"label-text"},e.title))})))))}function j(e){var t=e.assets,a=e.title;return console.log("assets",t),r.a.createElement("div",{className:"asset-card"},r.a.createElement("h2",null,a),r.a.createElement("ul",null,t.map((function(e){return r.a.createElement("li",{className:"asset"},r.a.createElement("h3",null,e.facname),r.a.createElement("p",null,[e.address,e.boro,e.city,e.zipcode].join(",")))}))))}function w(e){var t=e.feature,a=e.facilities;e.onSelectFacility;console.log(t),console.log(a);var l=Object(n.useState)(!1),c=Object(u.a)(l,2);c[0],c[1];return r.a.createElement("div",{className:"feature"},t?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"overview"},r.a.createElement("h2",null,"Census Tract: ",t.properties.GEOID),r.a.createElement("h2",null,"General Info"),r.a.createElement("p",null,"Population: ",r.a.createElement("span",null,t.properties.TotPopACS17)),r.a.createElement("p",null,"Mail return rate 2010: ",r.a.createElement("span",null,t.properties.MRR2010,"%")),r.a.createElement("p",null,"Inital Contact Strategy:",r.a.createElement("span",null,function(e){switch(e.strategy_code){case 0:return"Internet First, English";case 1:return"Internet First, Bilingual";case 2:return"Internet Choice, English";case 3:return"Internet Choice, Bilingual"}}(t.properties)))),r.a.createElement("div",{className:"cards"},r.a.createElement("div",{className:"card demographics"},r.a.createElement(S,{title:"Demographics",data:[{title:"white",value:t.properties.WhiteAloneOrCombo/t.properties.TotPopACS17},{title:"black",value:t.properties.BlackAloneOrCombo/t.properties.TotPopACS17},{title:"asian",value:t.properties.AsianAloneOrCombo/t.properties.TotPopACS17},{title:"hispanic",value:t.properties.Hispanic/t.properties.TotPopACS17}]})),r.a.createElement("div",{className:"card english_proficency"},r.a.createElement(S,{title:"English Proficency",data:function(e){return["LEPHHs","LEPspanHHs","LEPindoeurHHs","LEPapacHHs","LEPotherHHs"].map((function(t){return{value:e.properties[t],title:t}}))}(t),norm:!0})),r.a.createElement("div",{className:"card internet"},r.a.createElement(S,{title:"Internet Access",data:function(e){return["NoInternet","Internet_NoSub","Internet","DialUpOnly","Broadband_Any","Cellular","CellularOnly","Broadband_CableFiberOpticDSL","Broadband_CableFiberOpticDSLOnly","Satellite","SatelliteOnly","OtherOnly"].map((function(t){return{value:e.properties[t],title:t}}))}(t),norm:!0,style:{width:"500px"}})),r.a.createElement(j,{title:"Medical",assets:a}))):r.a.createElement("div",{className:"placeholder"},r.a.createElement("h2",null,"Click tract for details")))}var A=a(47),x=a.n(A);var B={strategy:["match",["get","strategy_code"],0,"#C2A5CF",1,"#9970AB",2,"#A6DBA0",3,"#5AAE61","grey"],returnCount:["interpolate",["linear"],["get","MRR2010"],0,"#309dae",100,"#ebf7f9"]},L={HTCLayer:{url:"".concat("/NYCCensusCountMap","/CensusTractsAllVariables.geojson"),paintFill:{"fill-color":"grey","fill-opacity":.7},paintLine:{"line-color":["case",["boolean",["coalesce",["feature-state","selected"],!1],!0],"red","white"],"line-width":["case",["boolean",["coalesce",["feature-state","selected"],!1],!0],3,1]}}};function F(e,t){var a=Object(n.useState)({}),r=Object(u.a)(a,2),l=r[0],c=r[1];return Object(n.useEffect)((function(){if(e.current){var a={};e.current.on("load",(function(){console.log("adding boundary layers"),[{id:"cd",datasetName:"Community Districts",url:"http://data.cityofnewyork.us/api/geospatial/yfnk-k7r4?method=export&format=Shapefile",nameCol:"boro_cd",nameAlt:null},{id:"pp",datasetName:"Police Precincts",url:"http://data.cityofnewyork.us/api/geospatial/78dh-3ptz?method=export&format=Shapefile",nameCol:"precinct",nameAlt:null},{id:"sd",datasetName:"School Districts",url:"http://data.cityofnewyork.us/api/geospatial/r8nu-ymqj?method=export&format=Shapefile",nameCol:"district",nameAlt:"districtco"},{id:"hc",datasetName:"Health Center Districts",url:"http://data.cityofnewyork.us/api/geospatial/b55q-34ps?method=export&format=Shapefile",nameCol:"hcent_dist",nameAlt:null},{id:"cc",datasetName:"City Council Districts",url:"http://data.cityofnewyork.us/api/geospatial/yusd-j4xi?method=export&format=Shapefile",nameCol:"coun_dist",nameAlt:null},{id:"nycongress",datasetName:"Congressional Districts",url:"http://data.cityofnewyork.us/api/geospatial/qd3c-zuu7?method=export&format=Shapefile",nameCol:"cong_dist",nameAlt:null},{id:"sa",datasetName:"State Assembly Districts",url:"http://data.cityofnewyork.us/api/geospatial/pf5b-73bw?method=export&format=Shapefile",nameCol:"assem_dist",nameAlt:null},{id:"ss",datasetName:"State Senate Districts",url:"http://data.cityofnewyork.us/api/geospatial/h4i2-acfi?method=export&format=Shapefile",nameCol:"st_sen_dis",nameAlt:null},{id:"nta",datasetName:"Neighborhood Tabulation Area",url:"http://data.cityofnewyork.us/api/geospatial/cpf4-rkhq?method=export&format=Shapefile",nameCol:"ntaname",nameAlt:"ntacode"},{id:"bid",datasetName:"Business Improvement District",url:"http://data.cityofnewyork.us/api/geospatial/ejxk-d93y?method=export&format=Shapefile",nameCol:"bid",nameAlt:null}].map((function(e){return Object(s.a)({},e,{paintLine:{"line-color":"black"}})})).forEach((function(n){var r="".concat(n.id,"_source"),l=Object(s.a)({},n);console.log("adding source ",r),l.source=e.current.addSource(r,{type:"geojson",data:"".concat("/NYCCensusCountMap","/boundaries/").concat(n.id,".geojson")}),n.paintFill&&(l.fillLayer=e.current.addLayer({id:"".concat(n.id,"-fill"),type:"fill",source:r,paint:n.paintFill},"waterway-label")),n.paintLine&&(l.lineLayer=e.current.addLayer({id:"".concat(n.id,"-line"),type:"line",source:r,paint:n.paintLine,layout:{visibility:t==n.id?"visible":"none"}},"waterway-label")),a[n.id]=l})),c(a)}))}}),[e]),Object(n.useEffect)((function(){e.current&&Object.entries(l).forEach((function(a){var n=Object(u.a)(a,2),r=n[0],l=n[1];e.current.setLayoutProperty("".concat(l.id,"-line"),"visibility",r==t?"visible":"none")}))}),[e,t]),l}function I(e,t){var a=function(){var e=Object(n.useState)(null),t=Object(u.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){fetch("".concat("/NYCCensusCountMap","/facilities.geojson")).then((function(e){return e.json()})).then((function(e){return r(e)}))}),[]),a}();return Object(n.useEffect)((function(){console.log("Map ",e," Facilities ",a),e.current&&a&&e.current.on("load",(function(){e.current.loadImage("".concat("/NYCCensusCountMap","/marker.png"),(function(n,r){if(n)throw n;e.current.addImage("marker",r),e.current.addLayer({id:"facilities",type:"symbol",source:{type:"geojson",data:a},layout:{"icon-image":"marker","icon-size":.4,"text-field":["get","facname"],"text-font":["Open Sans Semibold","Arial Unicode MS Bold"],"text-offset":[0,.6],"text-size":10,"text-anchor":"top",visibility:t?"visible":"none"}})}))}))}),[e,a]),Object(n.useEffect)((function(){e.current&&e.current.loaded()&&e.current.setLayoutProperty("facilities","visibility",t?"visible":"none")}),[e,t]),a}function M(){var e=Object(n.useRef)(null),t=Object(n.useState)("cd"),a=Object(u.a)(t,2),l=a[0],c=a[1],o=Object(n.useState)(null),i=Object(u.a)(o,2),m=i[0],p=i[1],f=Object(n.useState)([]),b=Object(u.a)(f,2),h=(b[0],b[1]),y=Object(n.useState)(!0),E=Object(u.a)(y,2),g=E[0],v=E[1],k=Object(n.useState)("strategy"),N=Object(u.a)(k,2),O=N[0],S=N[1];Object(n.useEffect)((function(){x.a.parse("/hard_to_count_NY.csv",{download:!0,header:!0,complete:function(e){h(e)}})}),[]);var j=function(e,t){var a=t.lnglat,r=t.zoom,l=t.style,c=t.key;d.a.accessToken=c;var o=Object(n.useRef)(null);return Object(n.useEffect)((function(){o.current=new d.a.Map({container:e.current,style:l,center:a,zoom:r})}),[e]),o}(e,{lnglat:[-73.9920330193022,40.75078660435196],zoom:10,style:"mapbox://styles/mapbox/light-v10",key:"pk.eyJ1Ijoic3R1YXJ0LWx5bm4iLCJhIjoiM2Q4ODllNmRkZDQ4Yzc3NTBhN2UyNDE0MWY2OTRiZWIifQ.8OEKvgZBCCtDFUXkjt66Pw"}),A=Object(s.a)({},L.HTCLayer,{},{paintFill:{"fill-color":B[O]}}),M=(function(e,t,a){var r=a.url,l=a.paintFill,c=a.paintLine,o=(a.sourceLayer,a.onClick),i=a.selection,s=Object(n.useRef)(null),u=Object(n.useRef)(null),m=Object(n.useRef)(null),d="".concat(t,"_source"),p=Object(n.useRef)(null);Object(n.useEffect)((function(){e.current&&e.current.on("load",(function(){m.current=e.current.addSource(d,{type:"geojson",data:r}),l&&(s.current=e.current.addLayer({id:"".concat(t,"-fill"),type:"fill",source:d,paint:l},"waterway-label")),c&&(u.current=e.current.addLayer({id:"".concat(t,"-line"),type:"line",source:d,paint:c},"waterway-label")),e.current.on("click","".concat(t,"-fill"),(function(e){console.log(e.features[0]),o&&o(e.features[0])}))}))}),[e]),Object(n.useEffect)((function(){e.current&&i&&(p.current&&e.current.setFeatureState({source:d,id:p.current},{selected:!1}),e.current.setFeatureState({source:d,id:i.id},{selected:!0}),p.current=i.id)}),[i]),Object(n.useEffect)((function(){e.current&&e.current.loaded()&&(console.log("setting fill color to be ",l["fill-color"],l),e.current.setPaintProperty("".concat(t,"-fill"),"fill-color",l["fill-color"]))}),[l])}(j,"HTC",Object(s.a)({},A,{onClick:function(e){return p(e)},selection:m})),F(j,l)),D=I(j,g),P=function(e,t){return Object(n.useMemo)((function(){return e?t.features.filter((function(t){return t.properties.GEOID==e})).map((function(e){return e.properties})):[]}),[e,t])}(m?m.properties.GEOID:null,D);return r.a.createElement("div",{className:"main-page"},r.a.createElement("div",{className:"map",ref:e}),r.a.createElement("div",{className:"info overlay"},r.a.createElement("h2",null,"NYC CENSUS 2020 INTERACTIVE MAP"),r.a.createElement("h3",null,"Created by Stuart Lynn: Hosted/designed Hester Street"),r.a.createElement("p",null,"This interactive map serves the purpose for any organization to learn more about the people they serve. This map is fully interactive and will remain avaliable after the Census effort")),r.a.createElement("div",{className:"details overlay"},r.a.createElement(w,{facilities:P,feature:m})," "),r.a.createElement(C,{boundaries:M,selectedBoundary:l,onSelectBoundary:c,showFacilities:g,onShowFacilitiesChange:v,metric:O,onSelectMetric:S}))}a(82);var D=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(o.a,{basename:"/NYCCensusCountMap"},r.a.createElement(i.a,{path:"/",component:M})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(D,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[53,1,2]]]);
//# sourceMappingURL=main.27360bf2.chunk.js.map